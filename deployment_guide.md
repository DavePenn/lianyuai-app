# æ‹è¯­AIæ•°æ®åº“ç®¡ç†å·¥å…·éƒ¨ç½²æŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

æœ¬é¡¹ç›®ä¸ºæ‹è¯­AIèŠå¤©ç³»ç»Ÿåˆ›å»ºäº†ä¸€å¥—å®Œæ•´çš„æ•°æ®åº“ç®¡ç†å·¥å…·é›†ï¼ŒåŒ…æ‹¬ç”¨æˆ·ç®¡ç†ã€ä¼šè¯åˆ†æã€æ•°æ®ç»´æŠ¤ç­‰åŠŸèƒ½ã€‚

### ğŸ—‚ï¸ å·¥å…·é›†ç»„æˆ

1. **view-database-data.js** - åŸºç¡€æ•°æ®æŸ¥çœ‹å™¨
2. **user-profile-manager.js** - ç”¨æˆ·ä¸ªäººèµ„æ–™ç®¡ç†å™¨
3. **chat-session-analyzer.js** - èŠå¤©ä¼šè¯åˆ†æå™¨
4. **database-maintenance.js** - æ•°æ®åº“ç»´æŠ¤å·¥å…·
5. **README.md** - è¯¦ç»†ä½¿ç”¨æ–‡æ¡£

## ğŸ”§ ç¯å¢ƒé…ç½®

### è¿œç¨‹æœåŠ¡å™¨ä¿¡æ¯
- **æœåŠ¡å™¨åœ°å€**: 152.32.218.174
- **ç”¨æˆ·**: root
- **å¯†ç **: daiyiping123
- **é¡¹ç›®è·¯å¾„**: /var/www/lianyu_ai/backend

### æ•°æ®åº“é…ç½®
- **æ•°æ®åº“**: PostgreSQL
- **æ•°æ®åº“å**: lianyu_ai
- **ä¸»è¦è¡¨**: users, sessions, messages
- **å½“å‰æ•°æ®**: 52ä¸ªç”¨æˆ·ï¼Œ0ä¸ªä¼šè¯ï¼Œ0æ¡æ¶ˆæ¯

### Node.jsç¯å¢ƒ
- **è¿œç¨‹æœåŠ¡å™¨**: Node.js v12.22.12, npm 6.14.16
- **æœ¬åœ°å¼€å‘**: éœ€è¦å®‰è£…pgæ¨¡å—ä¾èµ–

## ğŸ“Š å½“å‰æ•°æ®åº“çŠ¶æ€

### æ•°æ®ç»Ÿè®¡
```sql
-- ç”¨æˆ·æ€»æ•°
SELECT COUNT(*) FROM users; -- ç»“æœ: 52

-- ä¼šè¯æ€»æ•°
SELECT COUNT(*) FROM sessions; -- ç»“æœ: 0

-- æ¶ˆæ¯æ€»æ•°
SELECT COUNT(*) FROM messages; -- ç»“æœ: 0
```

### ç”¨æˆ·æ•°æ®æ ·æœ¬
æœ€æ–°10ä¸ªç”¨æˆ·éƒ½æ˜¯æµ‹è¯•æ•°æ®ï¼Œç”¨æˆ·åæ ¼å¼ä¸º `testuser_xxx`ï¼Œé‚®ç®±æ ¼å¼ä¸º `testuser_xxx@example.com`ã€‚

## ğŸš€ éƒ¨ç½²çŠ¶æ€

### âœ… å·²å®Œæˆ
1. **è„šæœ¬åˆ›å»º**: æ‰€æœ‰ç®¡ç†è„šæœ¬å·²åˆ›å»ºå®Œæˆ
2. **æ–‡ä»¶ä¸Šä¼ **: è„šæœ¬å·²ä¸Šä¼ åˆ°è¿œç¨‹æœåŠ¡å™¨
3. **æ•°æ®åº“è¿æ¥**: ç¡®è®¤æ•°æ®åº“å¯æ­£å¸¸è®¿é—®
4. **æ•°æ®åˆ†æ**: å®Œæˆå½“å‰æ•°æ®çŠ¶æ€åˆ†æ

### âš ï¸ å¾…è§£å†³é—®é¢˜
1. **ç”¨æˆ·è®¤è¯**: lianyu_userç”¨æˆ·å¯†ç è®¤è¯å¤±è´¥
2. **Node.jsè·¯å¾„**: postgresç”¨æˆ·æ— æ³•æ‰¾åˆ°nodeå‘½ä»¤
3. **ä¾èµ–å®‰è£…**: éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…pgæ¨¡å—

## ğŸ› ï¸ ä¸‹ä¸€æ­¥æ“ä½œå»ºè®®

### 1. ä¿®å¤æ•°æ®åº“è®¤è¯é—®é¢˜
```bash
# æ£€æŸ¥PostgreSQLç”¨æˆ·é…ç½®
sudo -u postgres psql -c "\du"

# é‡ç½®lianyu_userå¯†ç 
sudo -u postgres psql -c "ALTER USER lianyu_user PASSWORD 'new_password';"

# æ›´æ–°.envæ–‡ä»¶ä¸­çš„å¯†ç 
```

### 2. å®‰è£…Node.jsä¾èµ–
```bash
# åœ¨é¡¹ç›®ç›®å½•å®‰è£…pgæ¨¡å—
cd /var/www/lianyu_ai/backend
npm install pg

# æˆ–è€…å…¨å±€å®‰è£…
npm install -g pg
```

### 3. é…ç½®ç¯å¢ƒå˜é‡
```bash
# ç¡®ä¿.envæ–‡ä»¶é…ç½®æ­£ç¡®
cat /var/www/lianyu_ai/backend/.env

# æµ‹è¯•æ•°æ®åº“è¿æ¥
node -e "const { Pool } = require('pg'); const pool = new Pool({connectionString: process.env.DATABASE_URL}); pool.query('SELECT NOW()').then(res => console.log(res.rows[0])).catch(err => console.error(err));"
```

### 4. æµ‹è¯•è„šæœ¬åŠŸèƒ½
```bash
# æµ‹è¯•ç”¨æˆ·ç®¡ç†è„šæœ¬
node scripts/user-profile-manager.js stats
node scripts/user-profile-manager.js list

# æµ‹è¯•ä¼šè¯åˆ†æè„šæœ¬
node scripts/chat-session-analyzer.js list
node scripts/chat-session-analyzer.js analyze

# æµ‹è¯•æ•°æ®åº“ç»´æŠ¤è„šæœ¬
node scripts/database-maintenance.js health-check
node scripts/database-maintenance.js backup
```

### 5. æ•°æ®æ¸…ç†å’Œä¼˜åŒ–
```bash
# æ¸…ç†æµ‹è¯•ç”¨æˆ·æ•°æ®
node scripts/user-profile-manager.js cleanup-test

# æ•°æ®åº“å¥åº·æ£€æŸ¥
node scripts/database-maintenance.js health-check

# ä¼˜åŒ–æ•°æ®åº“æ€§èƒ½
node scripts/database-maintenance.js optimize
```

## ğŸ“ˆ åŠŸèƒ½æ¼”ç¤º

### ç”¨æˆ·ç®¡ç†åŠŸèƒ½
- æŸ¥çœ‹ç”¨æˆ·åˆ—è¡¨å’Œç»Ÿè®¡
- è·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯
- å¯¼å‡ºç”¨æˆ·æ•°æ®
- æ¸…ç†æµ‹è¯•ç”¨æˆ·

### ä¼šè¯åˆ†æåŠŸèƒ½
- åˆ†æèŠå¤©æ¨¡å¼
- å¯¼å‡ºä¼šè¯æ•°æ®
- æ¸…ç†ç©ºä¼šè¯
- ç”Ÿæˆä½¿ç”¨æŠ¥å‘Š

### æ•°æ®åº“ç»´æŠ¤åŠŸèƒ½
- è‡ªåŠ¨å¤‡ä»½æ•°æ®åº“
- å¥åº·çŠ¶æ€æ£€æŸ¥
- æ€§èƒ½ä¼˜åŒ–å»ºè®®
- æ—§æ•°æ®æ¸…ç†

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

1. **å¯†ç å®‰å…¨**: é¿å…åœ¨å‘½ä»¤è¡Œä¸­æ˜æ–‡æ˜¾ç¤ºå¯†ç 
2. **æƒé™æ§åˆ¶**: ç¡®ä¿è„šæœ¬åªèƒ½ç”±æˆæƒç”¨æˆ·æ‰§è¡Œ
3. **æ•°æ®å¤‡ä»½**: åœ¨æ‰§è¡Œæ¸…ç†æ“ä½œå‰åŠ¡å¿…å¤‡ä»½æ•°æ®
4. **æ—¥å¿—è®°å½•**: é‡è¦æ“ä½œåº”è®°å½•è¯¦ç»†æ—¥å¿—

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æ•°æ®åº“è¿æ¥é…ç½®
2. Node.jså’Œnpmç‰ˆæœ¬å…¼å®¹æ€§
3. æ–‡ä»¶æƒé™è®¾ç½®
4. ç¯å¢ƒå˜é‡é…ç½®

## ğŸ“ æ›´æ–°æ—¥å¿—

- **2024-01-XX**: åˆ›å»ºå®Œæ•´çš„æ•°æ®åº“ç®¡ç†å·¥å…·é›†
- **2024-01-XX**: å®Œæˆè„šæœ¬ä¸Šä¼ å’Œåˆæ­¥æµ‹è¯•
- **2024-01-XX**: åˆ†æå½“å‰æ•°æ®åº“çŠ¶æ€å’Œé—®é¢˜

---

**é¡¹ç›®çŠ¶æ€**: ğŸŸ¡ éƒ¨åˆ†å®Œæˆï¼Œå¾…è§£å†³è®¤è¯å’Œä¾èµ–é—®é¢˜
**ä¸‹ä¸€æ­¥**: ä¿®å¤æ•°æ®åº“è®¤è¯ï¼Œå®‰è£…ä¾èµ–ï¼Œæµ‹è¯•æ‰€æœ‰åŠŸèƒ½