<!DOCTYPE html>
<html lang="en-US" id="main-html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="">
    <meta name="desc-key" content="app.description">
    <meta name="title-key" content="app.name">
    <meta name="theme-color" content="#6c5ce7">
    <title></title>
    
    <!-- PWA Support -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/style.css?v=20250818-cachefix">
    <link rel="stylesheet" href="css/i18n.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Cross-platform Adapters -->
    <script src="config/platform-config.js"></script>
    <script src="adapters/storage-adapter.js"></script>
    <script src="adapters/network-adapter.js"></script>
    
    <!-- Environment Config Loader -->
    <script src="config/env-loader.js"></script>
    
    <!-- OAuth Configuration -->
    <script src="config/oauth-config.js"></script>
    
    <!-- Internationalization Support -->
    <script src="config/i18n.js"></script>

    
    <!-- Backend Service Interface -->
    <script>document.write('<script src="api/backend-service.js?v=' + new Date().getTime() + '"><\/script>');</script>
    
    <!-- AI Service -->
    <script src="api/ai-service.js"></script>
    
    <!-- Authentication Management -->
    <script src="js/auth.js"></script>
    
    <!-- Enhanced Carousel Component -->
    <script src="js/carousel-enhanced.js"></script>
    
    <!-- Main Application Logic -->
    <script>document.write('<script src="js/app.js?v=' + new Date().getTime() + '"><\/script>');</script>
    

    
    <!-- Preconnect Cross-origin Resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
</head>
<body>
    <div class="app-container">


        <!-- 主内容区域 -->
        <main class="app-content">
            <!-- 首页 -->
            <div id="home-page" class="app-page">
                <!-- 首页轮播卡片 -->
                <div class="hero-carousel">
                    <div class="carousel-container">
                        <!-- Scenario Card 1: Chat Opener -->
                        <div class="hero-slide active">
                            <div class="hero-background">
                                <div class="hero-pattern pattern-chat"></div>
                            </div>
                            <div class="hero-content">
                                <div class="hero-badge">Chat Opener</div>
                <h2>Don't know how to start a conversation?</h2>
                <p>AI-customized personalized openers<br>Make your first words capture their heart</p>
                                <div class="hero-stats">
                                    <div class="stat">
                                        <span class="stat-number">92%</span>
                                        <span class="stat-label">Success Rate</span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-number">1000+</span>
                                        <span class="stat-label">Templates</span>
                                    </div>
                                </div>
                                <button class="hero-cta-btn">Try Now</button>
                            </div>
                        </div>
                        
                        <!-- Scenario Card 2: Reply Suggestions -->
                        <div class="hero-slide">
                            <div class="hero-background">
                                <div class="hero-pattern pattern-reply"></div>
                            </div>
                            <div class="hero-content">
                                <div class="hero-badge">Reply Suggestions</div>
                <h2>Don't know how to reply to their message?</h2>
                <p>AI analyzes conversation context<br>Generates 3 style reply options</p>
                                <div class="hero-stats">
                                    <div class="stat">
                                        <span class="stat-number">85%</span>
                                        <span class="stat-label">Reply Rate</span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-number">5s</span>
                                        <span class="stat-label">Generation</span>
                                    </div>
                                </div>
                                <button class="hero-cta-btn">Get Suggestions</button>
                            </div>
                        </div>
                        
                        <!-- Scenario Card 3: Emotion Analysis -->
                        <div class="hero-slide">
                            <div class="hero-background">
                                <div class="hero-pattern pattern-mood"></div>
                            </div>
                            <div class="hero-content">
                                <div class="hero-badge">Emotion Analysis</div>
                <h2>How to comfort when they're feeling down?</h2>
                <p>AI identifies emotional states<br>Recommends the most caring comfort approaches</p>
                                <div class="hero-stats">
                                    <div class="stat">
                                        <span class="stat-number">90%</span>
                                        <span class="stat-label">Satisfaction</span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-number">24 Hours</span>
                                        <span class="stat-label">Online</span>
                                    </div>
                                </div>
                                <button class="hero-cta-btn">Start Analysis</button>
                            </div>
                        </div>
                        
                        <!-- Scenario Card 4: Date Planning -->
                        <div class="hero-slide">
                            <div class="hero-background">
                                <div class="hero-pattern pattern-date"></div>
                            </div>
                            <div class="hero-content">
                                <div class="hero-badge">Date Planning</div>
                <h2>Planning the perfect date?</h2>
                <p>AI recommends personalized date plans<br>Create unforgettable romantic moments</p>
                                <div class="hero-stats">
                                    <div class="stat">
                                        <span class="stat-number">78%</span>
                                        <span class="stat-label">Success Rate</span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-number">200+</span>
                                        <span class="stat-label">Plans</span>
                                    </div>
                                </div>
                                <button class="hero-cta-btn">Plan Now</button>
                            </div>
                        </div>
                        
                        <!-- Scenario Card 5: Conflict Resolution -->
                        <div class="hero-slide">
                            <div class="hero-background">
                                <div class="hero-pattern pattern-conflict"></div>
                            </div>
                            <div class="hero-content">
                                <div class="hero-badge">Conflict Resolution</div>
                <h2>Had an argument and don't know how to make up?</h2>
                <p>AI analyzes conflict causes<br>Provides step-by-step reconciliation strategies</p>
                                <div class="hero-stats">
                                    <div class="stat">
                                        <span class="stat-number">75%</span>
                                        <span class="stat-label">Resolution Rate</span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-number">Professional</span>
                                        <span class="stat-label">Response</span>
                                    </div>
                                </div>
                                <button class="hero-cta-btn">Resolve Now</button>
                            </div>
                        </div>
                        
                        <!-- Scenario Card 6: Long Distance -->
                        <div class="hero-slide">
                            <div class="hero-background">
                                <div class="hero-pattern pattern-distance"></div>
                            </div>
                            <div class="hero-content">
                                <div class="hero-badge">Long Distance</div>
                <h2>Long-distance relationship feeling distant?</h2>
                <p>AI suggests creative interaction ideas<br>Keep love fresh across the distance</p>
                                <div class="hero-stats">
                                    <div class="stat">
                                        <span class="stat-number">6+ Months</span>
                                        <span class="stat-label">Satisfaction</span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-number">Daily</span>
                                        <span class="stat-label">Couples</span>
                                    </div>
                                </div>
                                <button class="hero-cta-btn">Get Ideas</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="carousel-pagination">
                        <span class="pagination-dot active"></span>
                        <span class="pagination-dot"></span>
                        <span class="pagination-dot"></span>
                        <span class="pagination-dot"></span>
                        <span class="pagination-dot"></span>
                        <span class="pagination-dot"></span>
                    </div>
                    
                    <!-- 已移除导航按钮 -->
                </div>

                <!-- Enhanced Instant Experience Area -->
                <div class="quick-experience enhanced">
                    <div class="experience-header">
                        <h3 class="experience-title">💬 AI Smart Assistant Experience</h3>
                        <p class="experience-subtitle">Experience professional dating guidance instantly</p>
                    </div>
                    
                    <div class="demo-chat enhanced-chat">
                        <div class="chat-messages">
                            <div class="demo-message partner animated">
                                <div class="message-avatar">
                                    <div class="avatar-icon">💕</div>
                                </div>
                                <div class="message-content">
                                    <p>Hi, how was your day?</p>
                                    <span class="message-time">Just now</span>
                                </div>
                            </div>
                            
                            <div class="ai-thinking">
                                <div class="thinking-dots">
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                </div>
                                <span class="thinking-text">AI is generating reply suggestions...</span>
                            </div>
                        </div>
                        
                        <div class="demo-input enhanced-input">
                            <div class="input-container">
                                <input type="text" placeholder="Type your reply..." readonly>
                                <div class="input-features">
                                    <span class="feature-tag">🎯 Smart Analysis</span>
                                    <span class="feature-tag">💡 3 Styles</span>
                                </div>
                            </div>
                            <button class="try-now-btn enhanced-btn" 
                                    onclick="document.querySelector('.tab-item[data-page=\'chat\']').click(); setTimeout(() => { 
                                        if(window.tryNowDemoFunction) window.tryNowDemoFunction(); 
                                    }, 300);">
                                <span class="btn-text">Try Now</span>
                                <span class="btn-icon">✨</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="experience-stats">
                        <div class="stat-item">
                            <span class="stat-value">2.3s</span>
                            <span class="stat-label">Avg Response</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value">95%</span>
                            <span class="stat-label">Satisfaction</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value">24/7</span>
                            <span class="stat-label">Online Service</span>
                        </div>
                    </div>
                </div>

                <!-- Product Features Showcase - Hidden for simplicity -->
                <!--
                <div class="product-features">
                    ...
                </div>
                -->

                <!-- Features Section -->
                <div class="features-section">
                    <h3 class="section-title">💫 Core Features</h3>
                    
                    <div class="feature-item" data-feature="chat">
                        <div class="feature-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="feature-content">
                            <h3>🤖 Smart Reply</h3>
                            <p>AI analyzes context and generates personalized reply suggestions</p>
                        </div>
                        <i class="fas fa-chevron-right feature-arrow"></i>
                    </div>

                    <div class="feature-item" data-feature="analysis">
                        <div class="feature-icon">
                            <i class="fas fa-heart-pulse"></i>
                        </div>
                        <div class="feature-content">
                            <h3>❤️ Emotion Analysis</h3>
                            <p>Deep analysis of their emotional state and true thoughts</p>
                        </div>
                        <i class="fas fa-chevron-right feature-arrow"></i>
                    </div>

                    <div class="feature-item" data-feature="training">
                        <div class="feature-icon">
                            <i class="fas fa-dumbbell"></i>
                        </div>
                        <div class="feature-content">
                            <h3>💪 Chat Training</h3>
                            <p>Simulate real scenarios to improve communication skills</p>
                        </div>
                        <i class="fas fa-chevron-right feature-arrow"></i>
                    </div>

                    <div class="feature-item" data-feature="guidance">
                        <div class="feature-icon">
                            <i class="fas fa-compass"></i>
                        </div>
                        <div class="feature-content">
                            <h3>🧭 Love Guidance</h3>
                            <p>Professional relationship advice to help you find happiness</p>
                        </div>
                        <i class="fas fa-chevron-right feature-arrow"></i>
                    </div>

                    <div class="feature-item" data-feature="dating">
                        <div class="feature-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="feature-content">
                            <h3>💝 Dating Guide</h3>
                            <p>Professional dating guidance for successful dates</p>
                        </div>
                        <i class="fas fa-chevron-right feature-arrow"></i>
                    </div>
                </div>

                <!-- User Stories -->
                <div class="user-stories">
                    <h3 class="app-section-title">User Success Stories</h3>
                    <div class="story-card">
                        <div class="story-header">
                            <img src="https://public.youware.com/users-website-assets/prod/216bd08a-24ab-4700-aa1b-1337e15c089e/ai-generated-8639493_1280.jpg" alt="User Avatar" class="story-avatar">
                            <div class="story-user">
                                <h4>Alex <span class="success-tag">In Relationship</span></h4>
                                <p>24 years old · Developer · Introvert</p>
                            </div>
                        </div>
                        <div class="story-content">
                            <p>"I used to struggle with conversation starters and chats would end after three sentences. After using LoveAI, I had endless topics and successfully asked out my 3-year crush!"</p>
                        </div>
                        <div class="story-stats">
                            <div class="stat-item">
                                <span class="stat-value">2 weeks</span>
                                <span class="stat-label">Time to Success</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value">86%</span>
                                <span class="stat-label">Reply Rate</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value">3</span>
                                <span class="stat-label">Successful Dates</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Daily Statistics -->
                <div class="app-card-container">
                    <h3 class="app-section-title">Daily Assistant</h3>
                    <div class="stats-card">
                        <div class="stat-group">
                            <div class="big-stat">
                                <div class="big-stat-value">15</div>
                                <div class="big-stat-label">Today's Suggestions</div>
                                <div class="big-stat-desc">Generated 15 chat replies for you</div>
                            </div>
                            <div class="stat-row">
                                <div class="small-stat">
                                    <div class="small-stat-value">85%</div>
                                    <div class="small-stat-label">Success Rate</div>
                                </div>
                                <div class="small-stat">
                                    <div class="small-stat-value">3</div>
                                    <div class="small-stat-label">Training Sessions</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Common Problems -->
                <div class="app-card-container">
                    <h3 class="app-section-title">Common Chat Challenges</h3>
                    <div class="problem-cards">
                        <div class="problem-card">
                            <div class="problem-image">
                                <img src="https://public.youware.com/users-website-assets/prod/216bd08a-24ab-4700-aa1b-1337e15c089e/phone-9381637_1280.png" alt="Chat Problem">
                            </div>
                            <div class="problem-text">
                                <h4>Don't know how to start a conversation?</h4>
                                <p>AI generates personalized openers based on their profile</p>
                            </div>
                        </div>
                        <div class="problem-card">
                            <div class="problem-image">
                                <img src="https://public.youware.com/users-website-assets/prod/216bd08a-24ab-4700-aa1b-1337e15c089e/cell-phone-8610559_1280.png" alt="Chat Problem">
                            </div>
                            <div class="problem-text">
                                <h4>They suddenly stopped replying?</h4>
                                <p>AI analyzes the situation and provides professional recovery advice</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Page -->
            <div id="chat-page" class="app-page">
                <!-- Chat Sessions List -->
                <div class="chat-sessions">
                    <div class="sessions-header">
                        <button class="sessions-back-btn" id="sessions-back-btn">
                            <i class="fas fa-times"></i>
                        </button>
                        <h3>Chat Sessions</h3>
                        <button class="new-session-btn">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div class="sessions-search">
                        <input type="text" placeholder="Search sessions..." class="session-search-input">
                        <i class="fas fa-search session-search-icon"></i>
                    </div>
                    <div class="sessions-list">
                        <div class="session-item active" data-session-id="new-chat">
                            <div class="session-avatar">
                                <i class="fas fa-plus"></i>
                            </div>
                            <div class="session-time">Anytime</div>
                            <div class="session-info">
                                <div class="session-name">New Chat</div>
                                <div class="session-preview">Start a new conversation...</div>
                            </div>
                            <div class="session-menu-trigger" onclick="window.handleSessionMenuClick(event, this.parentNode, this)">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </div>
                        <!-- Sample Sessions -->
                        <div class="session-item" data-session-id="session1">
                            <div class="session-avatar category-crush">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="session-time">Yesterday</div>
                            <div class="session-info">
                                <div class="session-name">Crush Chat</div>
                                <div class="session-preview">Any new movie recommendations...</div>
                            </div>
                            <div class="session-menu-trigger" onclick="window.handleSessionMenuClick(event, this.parentNode, this)">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </div>
                        <div class="session-item" data-session-id="session2">
                            <div class="session-avatar category-date">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <div class="session-time">3 days ago</div>
                            <div class="session-info">
                                <div class="session-name">Weekend Date</div>
                                <div class="session-preview">So it's settled then...</div>
                            </div>
                            <div class="session-menu-trigger" onclick="window.handleSessionMenuClick(event, this.parentNode, this)">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </div>
                        <!-- More session items will be dynamically generated via JavaScript -->
                    </div>
                    <div class="session-actions">
                        <button class="session-action-btn" id="rename-session-btn" title="Rename Session">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="session-action-btn" id="clear-session-btn" title="Clear Session">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                        <button class="session-action-btn" id="manage-session-btn" title="More Actions">
                            <i class="fas fa-ellipsis-h"></i>
                        </button>
                    </div>
                </div>
                
                <div class="chat-page">
                    <!-- Chat Content Area -->
                    <div class="chat-content">
                        <div class="chat-container">
                            <div id="chat-messages">
                                <div class="message ai-message">
                                    <div class="message-avatar ai">
                                        <i class="fas fa-robot"></i>
                                    </div>
                                    <div class="message-content">
                                        <p>Hi! I'm your AI dating assistant. How can I help you today?</p>
                                    </div>
                                </div>
                                <!-- Chat messages will be dynamically generated here -->
                            </div>
                        </div>
                        
                        <div class="chat-input-wrapper">
                            <div class="chat-input-box">
                                <button class="chat-attach-btn" id="chat-attach-btn">
                                    <i class="fas fa-plus"></i>
                                </button>
                                <div class="chat-input-container">
                                    <input type="text" class="chat-input-field" placeholder="Type your message...">
                                </div>
                                <button class="chat-send-btn" id="chat-send-btn">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                            <div class="chat-attachments-panel" id="chat-attachments-panel">
                                <div class="attachment-option">
                                    <div class="attachment-icon">
                                        <i class="fas fa-image"></i>
                                    </div>
                                    <span>Image</span>
                                    <input type="file" id="image-upload" accept="image/*" hidden>
                                </div>
                                <div class="attachment-option">
                                    <div class="attachment-icon">
                                        <i class="fas fa-camera"></i>
                                    </div>
                                    <span>Camera</span>
                                    <input type="file" id="camera-upload" accept="image/*" capture="camera" hidden>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Discover Page -->
            <div id="discover-page" class="app-page">
                <div class="app-card-container">
                    <h3 class="app-section-title">Learning Center</h3>
                    
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="feature-content">
                            <h3>Dating Skills</h3>
                            <p>Professional dating guidance courses</p>
                        </div>
                        <i class="fas fa-chevron-right feature-arrow"></i>
                    </div>

                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="feature-content">
                            <h3>Communication Art</h3>
                            <p>Improve your chat and communication skills</p>
                        </div>
                        <i class="fas fa-chevron-right feature-arrow"></i>
                    </div>

                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <div class="feature-content">
                            <h3>Psychology Test</h3>
                            <p>Discover your dating style</p>
                        </div>
                        <i class="fas fa-chevron-right feature-arrow"></i>
                    </div>
                </div>

                <div class="app-card-container">
                    <h3 class="app-section-title">Hot Topics</h3>
                    <div class="app-card">
                        <h4 style="margin-bottom: 8px;">How to Start a Conversation?</h4>
                        <p style="font-size: 14px; color: var(--text-light); margin-bottom: 12px;">Learn to use open-ended questions and common interests to break the ice...</p>
                        <div style="font-size: 12px; color: var(--primary-color);">23K views</div>
                    </div>
                    
                    <div class="app-card">
                        <h4 style="margin-bottom: 8px;">Dating Conversation Tips</h4>
                        <p style="font-size: 14px; color: var(--text-light); margin-bottom: 12px;">How to keep conversations interesting and meaningful during dates...</p>
                        <div style="font-size: 12px; color: var(--primary-color);">18K views</div>
                    </div>
                </div>
            </div>

            <!-- Message Page -->
            <div id="message-page" class="app-page" style="display: none;">
                <div class="app-card-container">
                    <h3 class="app-section-title">System Notifications</h3>
                    
                    <div class="app-card">
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <div style="width: 8px; height: 8px; background-color: var(--primary-color); border-radius: 50%; margin-right: 8px;"></div>
                            <span style="font-size: 16px; font-weight: 500;">LoveChat AI Upgrade</span>
                        </div>
                        <p style="font-size: 14px; color: var(--text-light); margin-bottom: 8px;">New psychology test feature added! Come test your dating style!</p>
                        <div style="font-size: 12px; color: var(--text-light);">2 hours ago</div>
                    </div>

                    <div class="app-card">
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <span style="font-size: 16px; font-weight: 500;">Daily Reminder</span>
                        </div>
                        <p style="font-size: 14px; color: var(--text-light); margin-bottom: 8px;">You haven't practiced chatting today. Check out the chat training!</p>
                        <div style="font-size: 12px; color: var(--text-light);">8 hours ago</div>
                    </div>

                    <div class="app-card">
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <span style="font-size: 16px; font-weight: 500;">Success Story</span>
                        </div>
                        <p style="font-size: 14px; color: var(--text-light); margin-bottom: 8px;">Congratulations to user Alex for successfully asking out their crush! Using LoveChat AI suggestions increased success rate by 50%</p>
                        <div style="font-size: 12px; color: var(--text-light);">1 day ago</div>
                    </div>
                </div>
            </div>

            <!-- Profile Page -->
            <div id="profile-page" class="app-page">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <i class="fas fa-user" style="font-size: 36px; color: #aaa; margin-top: 20px;"></i>
                    </div>
                    <div class="profile-name">LoveChat User</div>
                    <div class="profile-bio">Learning dating skills...</div>
                    
                    <div class="profile-stats">
                        <div class="profile-stat">
                            <div class="profile-stat-value">127</div>
                            <div class="profile-stat-label">Days Used</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value">85%</div>
                            <div class="profile-stat-label">Success Rate</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value">42</div>
                            <div class="profile-stat-label">Courses Learned</div>
                        </div>
                    </div>
                </div>

                <div class="profile-menu">
                    <div class="menu-item" data-page="edit-profile">
                        <div class="menu-icon">
                            <i class="fas fa-user-edit"></i>
                        </div>
                        <div class="menu-title">Edit Profile</div>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </div>

                    <div class="menu-item" data-page="settings">
                        <div class="menu-icon">
                            <i class="fas fa-cog"></i>
                        </div>
                        <div class="menu-title">Settings</div>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </div>

                    <div class="menu-item" data-page="statistics">
                        <div class="menu-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <div class="menu-title">Statistics</div>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </div>

                    <div class="menu-item" data-page="vip">
                        <div class="menu-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="menu-title">Upgrade Membership</div>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </div>

                    <div class="menu-item" data-page="help">
                        <div class="menu-icon">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <div class="menu-title">Help Center</div>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </div>

                    <div class="menu-item" data-page="about">
                        <div class="menu-icon">
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <div class="menu-title">About Us</div>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </div>

                    <div class="menu-item" id="language-switch-btn">
                        <div class="menu-icon">
                            <i class="fas fa-globe"></i>
                        </div>
                        <div class="menu-title">Language</div>
                        <div class="menu-value">
                            <span id="profile-current-language">English</span>
                        </div>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </div>

                    <div class="menu-item logout-item" id="logout-btn">
                        <div class="menu-icon">
                            <i class="fas fa-sign-out-alt"></i>
                        </div>
                        <div class="menu-title">Logout</div>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </div>
                </div>
            </div>

            <!-- 编辑资料页面 -->
            <div id="edit-profile-page" class="app-page">
                <div class="page-header">
                    <button class="back-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h2 class="page-title">Edit Profile</h2>
                    <button class="save-btn">Save</button>
                </div>
                
                <div class="page-content">
                    <div class="avatar-upload">
                        <div class="avatar-preview">
                            <i class="fas fa-user"></i>
                        </div>
                        <button class="avatar-change-btn">
                            <i class="fas fa-camera"></i>
                            <span>Change Avatar</span>
                        </button>
                    </div>
                    
                    <div class="form-group">
                        <label for="user-nickname">Nickname</label>
                        <input type="text" id="user-nickname" class="form-input" data-i18n-value="profile.username">
                    </div>
                    
                    <div class="form-group">
                        <label for="user-bio">Bio</label>
                        <textarea id="user-bio" class="form-textarea" placeholder="Tell us about yourself..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="user-gender">Gender</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="user-gender" value="male" checked>
                                <span>Male</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="user-gender" value="female">
                                <span>Female</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="user-gender" value="other">
                                <span>Other</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group" id="birth-date-container">
                        <label for="user-birth">Birth Date</label>
                        <div class="date-picker-wrapper">
                            <input type="text" id="user-birth-display" class="form-input date-display" placeholder="Select your birth date" readonly>
                            <button type="button" class="date-picker-btn" id="date-picker-trigger">
                                <i class="fas fa-calendar-alt"></i>
                            </button>
                        </div>
                        <input type="hidden" id="user-birth" class="form-input">
                        
                        <!-- 自定义日期选择器弹窗 -->
                        <div class="date-picker-modal" id="date-picker-modal">
                            <div class="date-picker-content">
                                <div class="date-picker-header">
                                    <h4>Select Birth Date</h4>
                                    <button type="button" class="close-btn" id="date-picker-close">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="date-picker-body">
                                    <div class="date-input-row">
                                        <div class="date-input-group">
                                            <label>Month</label>
                                            <select id="birth-month" class="form-select">
                                                <option value="">Month</option>
                                                <option value="01">January</option>
                                                <option value="02">February</option>
                                                <option value="03">March</option>
                                                <option value="04">April</option>
                                                <option value="05">May</option>
                                                <option value="06">June</option>
                                                <option value="07">July</option>
                                                <option value="08">August</option>
                                                <option value="09">September</option>
                                                <option value="10">October</option>
                                                <option value="11">November</option>
                                                <option value="12">December</option>
                                            </select>
                                        </div>
                                        <div class="date-input-group">
                                            <label>Day</label>
                                            <select id="birth-day" class="form-select">
                                                <option value="">Day</option>
                                            </select>
                                        </div>
                                        <div class="date-input-group">
                                            <label>Year</label>
                                            <select id="birth-year" class="form-select">
                                                <option value="">Year</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="date-picker-footer">
                                    <button type="button" class="btn-secondary" id="date-picker-cancel">Cancel</button>
                                    <button type="button" class="btn-primary" id="date-picker-confirm">Confirm</button>
                                </div>
                            </div>
                        </div>
                        
                        <script>
                        // 初始化英文日期选择器弹窗
                        (function() {
                            const displayInput = document.getElementById('user-birth-display');
                            const hiddenInput = document.getElementById('user-birth');
                            const trigger = document.getElementById('date-picker-trigger');
                            const modal = document.getElementById('date-picker-modal');
                            const closeBtn = document.getElementById('date-picker-close');
                            const cancelBtn = document.getElementById('date-picker-cancel');
                            const confirmBtn = document.getElementById('date-picker-confirm');
                            const monthSelect = document.getElementById('birth-month');
                            const daySelect = document.getElementById('birth-day');
                            const yearSelect = document.getElementById('birth-year');
                            
                            // 填充年份选项（1950-2010）
                            const currentYear = new Date().getFullYear();
                            for (let year = currentYear - 10; year >= 1950; year--) {
                                const option = document.createElement('option');
                                option.value = year;
                                option.textContent = year;
                                yearSelect.appendChild(option);
                            }
                            
                            // 填充日期选项
                            function updateDays() {
                                const month = monthSelect.value;
                                const year = yearSelect.value;
                                daySelect.innerHTML = '<option value="">Day</option>';
                                
                                if (month && year) {
                                    const daysInMonth = new Date(year, month, 0).getDate();
                                    for (let day = 1; day <= daysInMonth; day++) {
                                        const option = document.createElement('option');
                                        const dayStr = day.toString().padStart(2, '0');
                                        option.value = dayStr;
                                        option.textContent = day;
                                        daySelect.appendChild(option);
                                    }
                                }
                            }
                            
                            // 格式化显示日期
                            function formatDisplayDate(year, month, day) {
                                const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                                    'July', 'August', 'September', 'October', 'November', 'December'];
                                return `${monthNames[parseInt(month) - 1]} ${parseInt(day)}, ${year}`;
                            }
                            
                            // 打开弹窗
                            trigger.addEventListener('click', () => {
                                modal.style.display = 'flex';
                                document.body.style.overflow = 'hidden';
                            });
                            
                            // 关闭弹窗
                            function closeModal() {
                                modal.style.display = 'none';
                                document.body.style.overflow = '';
                            }
                            
                            closeBtn.addEventListener('click', closeModal);
                            cancelBtn.addEventListener('click', closeModal);
                            
                            // 点击背景关闭
                            modal.addEventListener('click', (e) => {
                                if (e.target === modal) closeModal();
                            });
                            
                            // 确认选择
                            confirmBtn.addEventListener('click', () => {
                                const month = monthSelect.value;
                                const day = daySelect.value;
                                const year = yearSelect.value;
                                
                                if (month && day && year) {
                                    hiddenInput.value = `${year}-${month}-${day}`;
                                    displayInput.value = formatDisplayDate(year, month, day);
                                    closeModal();
                                }
                            });
                            
                            // 绑定日期联动
                            monthSelect.addEventListener('change', updateDays);
                            yearSelect.addEventListener('change', updateDays);
                            
                            // 如果有初始值，设置显示
                            if (hiddenInput.value) {
                                const [year, month, day] = hiddenInput.value.split('-');
                                displayInput.value = formatDisplayDate(year, month, day);
                            }
                        })();
                        </script>
                    </div>
                    
                    <div class="form-group">
                        <label for="user-location" data-i18n="edit_profile.location">所在地区</label>
                        <div class="location-selector">
                            <select id="user-country" class="form-select">
                                <option value="">Select Country/Region</option>
                                <option value="us">United States</option>
                                <option value="uk">United Kingdom</option>
                                <option value="ca">Canada</option>
                                <option value="au">Australia</option>
                                <option value="de">Germany</option>
                                <option value="fr">France</option>
                                <option value="jp">Japan</option>
                                <option value="kr">South Korea</option>
                                <option value="sg">Singapore</option>
                                <option value="hk">Hong Kong</option>
                                <option value="tw">Taiwan</option>
                                <option value="other">Other</option>
                            </select>
                            <select id="user-city" class="form-select">
                                <option value="">Select City</option>
                                <!-- 城市选项将通过JavaScript动态加载 -->
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Relationship Status</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="user-relationship" value="single" checked>
                                <span>Single</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="user-relationship" value="in-relationship">
                                <span>In Relationship</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="user-relationship" value="complicated">
                                <span>Complicated</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Interests</label>
                        <div class="interest-tags">
                            <div class="interest-tag active">
                                <span>Movies</span>
                                <i class="fas fa-times"></i>
                            </div>
                            <div class="interest-tag active">
                                <span>Travel</span>
                                <i class="fas fa-times"></i>
                            </div>
                            <div class="interest-tag active">
                                <span>Music</span>
                                <i class="fas fa-times"></i>
                            </div>
                            <div class="interest-tag">
                                <span>Sports</span>
                                <i class="fas fa-times"></i>
                            </div>
                            <div class="interest-tag">
                                <span>Photography</span>
                                <i class="fas fa-times"></i>
                            </div>
                            <div class="interest-tag">
                                <span>Hiking</span>
                                <i class="fas fa-times"></i>
                            </div>
                            <div class="interest-tag add-tag">
                                <i class="fas fa-plus"></i>
                                <span>Add</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 联系方式暂时隐藏
                    <div class="form-group">
                        <label for="user-contact" data-i18n="edit_profile.contact">联系方式</label>
                        <input type="text" id="user-contact" class="form-input" data-i18n-placeholder="edit_profile.contact_placeholder">
                        <small class="form-helper" data-i18n="edit_profile.contact_note">仅对恋爱对象可见，可放心填写</small>
                    </div>
                    -->
                </div>
            </div>

            <!-- 设置页面 -->
            <div id="settings-page" class="app-page">
                <div class="page-header">
                    <button class="back-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h2 class="page-title">Settings</h2>
                    <button class="save-btn">Save</button>
                </div>
                
                <div class="page-content">
                    <div class="settings-section">
                        <h4>Appearance</h4>
                        <div class="settings-item">
                            <div class="settings-item-info">
                                <div class="settings-item-title">Dark Mode</div>
                                <div class="settings-item-desc">Protect your eyes and save battery</div>
                            </div>
                            <div class="toggle-switch">
                                <input type="checkbox" id="dark-mode-toggle" class="toggle-input">
                                <label for="dark-mode-toggle" class="toggle-label"></label>
                            </div>
                        </div>
                        <div class="settings-item">
                            <div class="settings-item-info">
                                <div class="settings-item-title">Theme Color</div>
                                <div class="settings-item-desc">Choose your favorite color</div>
                            </div>
                            <div class="color-options">
                                <span class="color-option active" style="background-color: #ff3e79;"></span>
                                <span class="color-option" style="background-color: #6c5ce7;"></span>
                                <span class="color-option" style="background-color: #00cec9;"></span>
                                <span class="color-option" style="background-color: #fdcb6e;"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h4>Notifications</h4>
                        <div class="settings-item">
                            <div class="settings-item-info">
                                <div class="settings-item-title">Push Notifications</div>
                                <div class="settings-item-desc">Receive new messages and activity alerts</div>
                            </div>
                            <div class="toggle-switch">
                                <input type="checkbox" id="notification-toggle" class="toggle-input" checked>
                                <label for="notification-toggle" class="toggle-label"></label>
                            </div>
                        </div>
                        <div class="settings-item">
                            <div class="settings-item-info">
                                <div class="settings-item-title">Sound Alerts</div>
                                <div class="settings-item-desc">Sound notification for new messages</div>
                            </div>
                            <div class="toggle-switch">
                                <input type="checkbox" id="sound-toggle" class="toggle-input" checked>
                                <label for="sound-toggle" class="toggle-label"></label>
                            </div>
                        </div>
                    </div>
                    

                    
                    <div class="settings-section">
                        <h4>Privacy</h4>
                        <div class="settings-item">
                            <div class="settings-item-info">
                                <div class="settings-item-title">Data Collection</div>
                                <div class="settings-item-desc">Allow data collection to improve services</div>
                            </div>
                            <div class="toggle-switch">
                                <input type="checkbox" id="data-toggle" class="toggle-input" checked>
                                <label for="data-toggle" class="toggle-label"></label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 数据统计页面 -->
            <div id="statistics-page" class="app-page">
                <div class="page-header">
                    <button class="back-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h2 class="page-title">Statistics</h2>
                </div>
                
                <div class="page-content">
                    <div class="stats-summary">
                        <div class="stats-card">
                            <div class="stats-card-value">127</div>
                            <div class="stats-card-label">Days Used</div>
                        </div>
                        <div class="stats-card">
                            <div class="stats-card-value">356</div>
                            <div class="stats-card-label">Total Messages</div>
                        </div>
                        <div class="stats-card">
                            <div class="stats-card-value">85%</div>
                            <div class="stats-card-label">Reply Rate</div>
                        </div>
                    </div>
                    
                    <div class="stats-section">
                        <h4>Reply Assistant Usage</h4>
                        <div class="stats-chart-container">
                            <div class="placeholder-chart">
                                <div class="stats-bar" style="height: 60%;"><span>32</span></div>
                                <div class="stats-bar" style="height: 45%;"><span>24</span></div>
                                <div class="stats-bar" style="height: 75%;"><span>40</span></div>
                                <div class="stats-bar" style="height: 30%;"><span>16</span></div>
                                <div class="stats-bar" style="height: 90%;"><span>48</span></div>
                                <div class="stats-bar" style="height: 50%;"><span>27</span></div>
                                <div class="stats-bar" style="height: 65%;"><span>35</span></div>
                            </div>
                            <div class="chart-labels">
                                <span>Mon</span>
                                <span>Tue</span>
                                <span>Wed</span>
                                <span>Thu</span>
                                <span>Fri</span>
                                <span>Sat</span>
                                <span>Sun</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stats-section">
                        <h4>Popular Features</h4>
                        <div class="stats-list">
                            <div class="stats-list-item">
                                <div class="stats-rank">1</div>
                                <div class="stats-feature">
                                    <i class="fas fa-comment"></i>
                                    <span>Chat Opener</span>
                                </div>
                                <div class="stats-value">62 times</div>
                            </div>
                            <div class="stats-list-item">
                                <div class="stats-rank">2</div>
                                <div class="stats-feature">
                                    <i class="fas fa-reply"></i>
                                    <span>Reply Suggestion</span>
                                </div>
                                <div class="stats-value">47 times</div>
                            </div>
                            <div class="stats-list-item">
                                <div class="stats-rank">3</div>
                                <div class="stats-feature">
                                    <i class="fas fa-heart"></i>
                                    <span>Emotion Analysis</span>
                                </div>
                                <div class="stats-value">23 times</div>
                            </div>
                        </div>
                    </div>
                    

                </div>
            </div>

            <!-- 会员页面 -->
            <div id="vip-page" class="app-page">
                <div class="page-header">
                    <button class="back-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h2 class="page-title">Upgrade Membership</h2>
                </div>
                
                <div class="page-content">
                    <div class="vip-badges">
                        <div class="vip-badge">
                            <i class="fas fa-user"></i>
                            <span>Regular User</span>
                        </div>
                        <div class="vip-badge-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                        <div class="vip-badge premium">
                            <i class="fas fa-crown"></i>
                            <span>Premium Member</span>
                        </div>
                    </div>
                    
                    <div class="vip-plans">
                        <div class="vip-plan-card">
                            <div class="vip-plan-header">
                                <h4>Monthly Plan</h4>
                                <div class="vip-price">
                                    <span class="price-value">$4.99</span>
                                    <span class="price-period">/month</span>
                                </div>
                            </div>
                            <div class="vip-plan-features">
                                <div class="vip-feature">
                                    <i class="fas fa-check"></i>
                                    <span>Unlimited Reply Suggestions</span>
                                </div>
                                <div class="vip-feature">
                                    <i class="fas fa-check"></i>
                                    <span>Advanced Emotion Analysis</span>
                                </div>
                                <div class="vip-feature">
                                    <i class="fas fa-check"></i>
                                    <span>Date Planning Solutions</span>
                                </div>
                            </div>
                            <button class="vip-select-btn">Select</button>
                        </div>
                        
                        <div class="vip-plan-card recommended">
                            <div class="recommend-tag">Recommended</div>
                            <div class="vip-plan-header">
                                <h4>Yearly Plan</h4>
                                <div class="vip-price">
                                    <span class="price-value">$39.99</span>
                                    <span class="price-period">/year</span>
                                    <div class="price-discount">Save $19.89</div>
                                </div>
                            </div>
                            <div class="vip-plan-features">
                                <div class="vip-feature">
                                    <i class="fas fa-check"></i>
                                    <span>All Monthly Benefits</span>
                                </div>
                                <div class="vip-feature">
                                    <i class="fas fa-check"></i>
                                    <span>Priority AI Response</span>
                                </div>
                                <div class="vip-feature">
                                    <i class="fas fa-check"></i>
                                    <span>Exclusive Love Courses</span>
                                </div>
                                <div class="vip-feature">
                                    <i class="fas fa-check"></i>
                                    <span>1-on-1 Love Advisor</span>
                                </div>
                            </div>
                            <button class="vip-select-btn">Select</button>
                        </div>
                    </div>
                    
                    <div class="vip-benefits">
                        <h4>Member Benefits</h4>
                        <div class="benefits-grid">
                            <div class="benefit-item">
                                <i class="fas fa-infinity"></i>
                                <div class="benefit-title">Unlimited Usage</div>
                                <div class="benefit-desc">Use all features without limits</div>
                            </div>
                            <div class="benefit-item">
                                <i class="fas fa-bolt"></i>
                                <div class="benefit-title">Priority Response</div>
                                <div class="benefit-desc">Faster AI response speed</div>
                            </div>
                            <div class="benefit-item">
                                <i class="fas fa-ad"></i>
                                <div class="benefit-title">Ad-Free</div>
                                <div class="benefit-desc">Enjoy ad-free experience</div>
                            </div>
                            <div class="benefit-item">
                                <i class="fas fa-graduation-cap"></i>
                                <div class="benefit-title">Exclusive Courses</div>
                                <div class="benefit-desc">Advanced love skills guidance</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 帮助中心页面 -->
            <div id="help-page" class="app-page">
                <div class="page-header">
                    <button class="back-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h2 class="page-title" data-i18n="help.title">帮助中心</h2>
                </div>
                
                <div class="page-content">
                    <div class="search-box">
                        <input type="text" data-i18n-placeholder="help.search_placeholder">
                        <i class="fas fa-search"></i>
                    </div>
                    
                    <div class="faq-section">
                        <div class="faq-item">
                            <div class="faq-question">
                                <span data-i18n="help.faq1_question">如何使用聊天开场功能？</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <span data-i18n="help.faq1_answer">点击首页"聊天开场"卡片，输入对方的基本信息（如兴趣爱好、性格特点等），系统将为你生成个性化的开场白。你可以直接使用生成的内容，或根据需要进行修改。</span>
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question">
                                <span data-i18n="help.faq2_question">会员费用如何收取？</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <span data-i18n="help.faq2_answer">会员费用将在您确认订阅后立即从您选择的支付方式中扣除。月度会员每月自动续费，年度会员每年自动续费，除非您在下一个计费周期前取消订阅。</span>
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question">
                                <span data-i18n="help.faq3_question">如何保护我的隐私？</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <span data-i18n="help.faq3_answer">恋语AI高度重视用户隐私。您输入的所有聊天内容和个人信息都经过加密处理，不会被用于训练模型或分享给第三方。您也可以在设置中随时关闭数据收集功能。</span>
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question">
                                <span data-i18n="help.faq4_question">如何取消会员订阅？</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <span data-i18n="help.faq4_answer">您可以在"个人中心"→"会员管理"中找到取消订阅选项。取消后，您仍可以使用会员服务至当前计费周期结束。</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="contact-section">
                        <h4 data-i18n="help.contact_support">联系客服</h4>
                        <p data-i18n="help.contact_description">如果你的问题没有得到解答，可以通过以下方式联系我们</p>
                        <div class="contact-options">
                            <a href="mailto:danielkarios666@gmail.com" class="contact-btn">
                                <i class="fas fa-envelope"></i>
                                <span data-i18n="help.send_email">发送邮件</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 登录页面 -->
            <div id="login-page" class="app-page">
                <div class="page-content">
                    <div class="login-container">
                        <div class="app-logo">
                            <i class="fas fa-heart"></i>
                            <h2 data-i18n="app.name">LoveAI</h2>
                            <p class="welcome-text" data-i18n="login.welcome">Welcome back! Sign in to continue</p>
                        </div>
                        

                        
                        <!-- 测试账户提示 -->
                        <div class="test-account-hint" style="background: #e3f2fd; border: 1px solid #2196f3; border-radius: 8px; padding: 12px; margin-bottom: 20px; font-size: 14px; color: #1976d2;">
                            <i class="fas fa-info-circle" style="margin-right: 8px;"></i>
                            <strong>测试账户：</strong> daiyiping821@gmail.com / daiyiping123
                            <button type="button" id="fill-demo-account" style="margin-left: 10px; padding: 4px 8px; background: #2196f3; color: white; border: none; border-radius: 4px; font-size: 12px; cursor: pointer;">一键填入</button>
                        </div>
                        
                        <form id="login-form" class="auth-form">
                            <div class="form-group">
                                <label for="login-email" data-i18n="login.email">Email Address</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-envelope input-icon"></i>
                                    <input type="email" id="login-email" name="email" required 
                                           data-i18n-placeholder="login.email_placeholder"
                                           autocomplete="email">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="login-password" data-i18n="login.password">Password</label>
                                <div class="input-wrapper password-wrapper">
                                    <i class="fas fa-lock input-icon"></i>
                                    <input type="password" id="login-password" name="password" required 
                                           data-i18n-placeholder="login.password_placeholder"
                                           autocomplete="current-password">
                                    <button type="button" class="password-toggle" id="login-password-toggle" data-target="login-password">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="form-options">
                                <label class="checkbox-wrapper">
                                    <input type="checkbox" id="remember-me">
                                    <span class="checkmark"></span>
                                    <span data-i18n="login.remember_me">Remember me</span>
                                </label>
                                <a href="#" class="forgot-password" data-i18n="login.forgot_password">Forgot Password?</a>
                            </div>
                            
                            <button type="submit" class="auth-btn primary" data-i18n="login.submit">Sign In</button>
                        </form>
                        
                        <div class="auth-links">
                            <span data-i18n="login.no_account_text">Don't have an account?</span>
                            <a href="#" id="show-register" data-i18n="login.sign_up">Sign Up</a>
                        </div>
                        
                        <div class="auth-error" id="login-error" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <!-- 注册页面 -->
            <div id="register-page" class="app-page">
                <div class="page-header">
                    <h2 class="page-title" data-i18n="register.title">Sign Up</h2>
                </div>
                
                <div class="page-content">
                    <div class="register-container">
                        <div class="app-logo">
                            <i class="fas fa-heart"></i>
                            <h2 data-i18n="app.name">LoveAI</h2>
                            <p class="welcome-text" data-i18n="register.welcome">Create your account to get started</p>
                        </div>
                        

                        
                        <form id="register-form" class="auth-form">
                            <div class="form-group">
                                <label for="register-email" data-i18n="register.email">Email Address</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-envelope input-icon"></i>
                                    <input type="email" id="register-email" name="email" required 
                                           data-i18n-placeholder="register.email_placeholder"
                                           autocomplete="email">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="register-username" data-i18n="register.username">Username</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-user input-icon"></i>
                                    <input type="text" id="register-username" name="username" required 
                                           data-i18n-placeholder="register.username_placeholder"
                                           autocomplete="username">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="register-password" data-i18n="register.password">Password</label>
                                <div class="input-wrapper password-wrapper">
                                    <i class="fas fa-lock input-icon"></i>
                                    <input type="password" id="register-password" name="password" required 
                                           data-i18n-placeholder="register.password_placeholder"
                                           autocomplete="new-password">
                                    <button type="button" class="password-toggle" id="register-password-toggle" data-target="register-password">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="password-strength" id="password-strength">
                                    <div class="strength-bar">
                                        <div class="strength-fill"></div>
                                    </div>
                                    <span class="strength-text" data-i18n="register.password_strength">Password strength</span>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="register-confirm-password" data-i18n="register.confirm_password">Confirm Password</label>
                                <div class="input-wrapper password-wrapper">
                                    <i class="fas fa-lock input-icon"></i>
                                    <input type="password" id="register-confirm-password" name="confirmPassword" required 
                                           data-i18n-placeholder="register.confirm_password_placeholder"
                                           autocomplete="new-password">
                                    <button type="button" class="password-toggle" id="register-confirm-password-toggle" data-target="register-confirm-password">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="form-options">
                                <label class="checkbox-wrapper">
                                    <input type="checkbox" id="agree-terms" required>
                                    <span class="checkmark"></span>
                                    <span data-i18n="register.agree_terms">I agree to the <a href="#" class="terms-link">Terms of Service</a> and <a href="#" class="privacy-link">Privacy Policy</a></span>
                                </label>
                            </div>
                            
                            <button type="submit" class="auth-btn primary" data-i18n="register.submit">Create Account</button>
                        </form>
                        
                        <div class="auth-links">
                            <span data-i18n="register.has_account_text">Already have an account?</span>
                            <a href="#" id="show-login" data-i18n="register.sign_in">Sign In</a>
                        </div>
                        
                        <div class="auth-error" id="register-error" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <!-- 关于我们页面 -->
            <div id="about-page" class="app-page">
                <div class="page-header">
                    <button class="back-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h2 class="page-title" data-i18n="about.title">关于我们</h2>
                </div>
                
                <div class="page-content">
                    <div class="app-info">
                        <div class="app-logo">
                            <i class="fas fa-heart"></i>
                            <h2 data-i18n="about.app_name">恋语AI</h2>
                        </div>
                        <div class="app-version" data-i18n="about.version">版本 1.2.3</div>
                        <p class="app-description">
                            <span data-i18n="about.app_description">恋语AI是一款专注于解决恋爱沟通难题的智能助手，基于先进的人工智能技术，为用户提供聊天开场、回复建议、情感分析等功能，让恋爱交流不再困难。</span>
                        </p>
                    </div>
                    
                    <div class="team-section">
                        <h4 data-i18n="about.our_team">我们的团队</h4>
                        <p data-i18n="about.team_description">恋语AI由一群热爱科技、关注情感的年轻人创立，团队成员来自顶尖互联网公司和心理学研究机构，致力于用AI技术解决情感交流问题。</p>
                    </div>
                    
                    <div class="mission-section">
                        <h4 data-i18n="about.our_mission">我们的使命</h4>
                        <p data-i18n="about.mission_description">让每个人都能轻松自信地进行情感交流，建立健康的恋爱关系。</p>
                    </div>
                    
                    <div class="contact-section">
                        <h4 data-i18n="about.contact_us">联系我们</h4>
                        <div class="contact-options">
                            <a href="mailto:danielkarios666@gmail.com" class="contact-btn">
                                <i class="fas fa-envelope"></i>
                                <span data-i18n="about.send_email">发送邮件</span>
                            </a>
                        </div>
                    </div>
                    
                    <div class="terms-section">
                        <a href="#" data-i18n="about.terms_of_service">服务条款</a>
                        <a href="#" data-i18n="about.privacy_policy">隐私政策</a>
                    </div>
                    
                    <div class="copyright">
                        <span data-i18n="about.copyright">© 2025 恋语AI团队 版权所有</span>
                    </div>
                </div>
            </div>
        </main>



        <!-- 底部导航栏 -->
        <nav class="bottom-nav">
            <div class="tab-item active" data-page="home">
                <i class="fas fa-home tab-icon"></i>
                <span class="tab-label" data-i18n="bottom_nav.home">首页</span>
            </div>
            <div class="tab-item" data-page="chat">
                <i class="fas fa-comments tab-icon"></i>
                <span class="tab-label" data-i18n="bottom_nav.chat">聊天</span>
            </div>
            <div class="tab-item" data-page="discover">
                <i class="fas fa-compass tab-icon"></i>
                <span class="tab-label" data-i18n="bottom_nav.discover">发现</span>
            </div>
            <div class="tab-item" data-page="profile" id="profile-tab">
                <i class="fas fa-user tab-icon"></i>
                <span class="tab-label" data-i18n="bottom_nav.profile">我的</span>
            </div>
        </nav>
    </div>


    <script>
        // 页面导航功能
        function showPage(pageId) {
            // 隐藏所有页面
            document.querySelectorAll('.app-page').forEach(page => {
                page.classList.remove('active');
            });
            
            // 显示目标页面
            const targetPage = document.getElementById(pageId + '-page');
            if (targetPage) {
                targetPage.classList.add('active');
            }
            
            // 设置body的当前页面属性
            document.body.setAttribute('data-current-page', pageId);
            
            // 控制底部导航栏显示
            const bottomNav = document.querySelector('.bottom-nav');
            if (bottomNav) {
                if (pageId === 'login' || pageId === 'register') {
                    // 完全隐藏底部导航栏
                    bottomNav.style.cssText = 'display: none !important; visibility: hidden !important; opacity: 0 !important; pointer-events: none !important; box-shadow: none !important; border: none !important; transform: translateY(100%) !important; height: 0 !important; overflow: hidden !important; position: absolute !important; top: -9999px !important;';
                    bottomNav.classList.add('hidden');
                    bottomNav.setAttribute('data-hidden', 'true');
                } else {
                    // 恢复底部导航栏显示
                    bottomNav.style.cssText = '';
                    bottomNav.classList.remove('hidden');
                    bottomNav.removeAttribute('data-hidden');
                    bottomNav.style.display = 'flex';
                }
            }
        }
        
        // 检查用户是否已登录
        function isUserLoggedIn() {
            const token = localStorage.getItem('auth_token');
            return token && token !== 'null' && token !== '';
        }
        
        // 检查认证状态并更新UI
        function checkAuthStatus() {
            const isLoggedIn = isUserLoggedIn();
            const profileTab = document.getElementById('profile-tab');
            
            // 个人资料tab始终显示，因为只有登录用户才能看到底部导航栏
            if (profileTab) {
                profileTab.style.display = 'flex';
            }
        }
        
        // 密码可见性切换
        function togglePasswordVisibility(inputId, toggleBtn) {
            const input = document.getElementById(inputId);
            const icon = toggleBtn.querySelector('i');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.className = 'fas fa-eye-slash';
            } else {
                input.type = 'password';
                icon.className = 'fas fa-eye';
            }
        }
        
        // 密码强度检测
        function checkPasswordStrength(password) {
            let strength = 0;
            let feedback = [];
            
            // 长度检查
            if (password.length >= 8) strength += 1;
            else feedback.push('至少8个字符');
            
            // 包含小写字母
            if (/[a-z]/.test(password)) strength += 1;
            else feedback.push('包含小写字母');
            
            // 包含大写字母
            if (/[A-Z]/.test(password)) strength += 1;
            else feedback.push('包含大写字母');
            
            // 包含数字
            if (/\d/.test(password)) strength += 1;
            else feedback.push('包含数字');
            
            // 包含特殊字符
            if (/[!@#$%^&*(),.?":{}|<>]/.test(password)) strength += 1;
            else feedback.push('包含特殊字符');
            
            return { strength, feedback };
        }
        
        // 更新密码强度显示
        function updatePasswordStrength(password, strengthElement) {
            const { strength } = checkPasswordStrength(password);
            const strengthFill = strengthElement.querySelector('.strength-fill');
            const strengthText = strengthElement.querySelector('.strength-text');
            
            // 移除所有强度类
            strengthFill.className = 'strength-fill';
            
            if (password.length === 0) {
                strengthText.textContent = '';
                return;
            }
            
            if (strength <= 2) {
                strengthFill.classList.add('weak');
                strengthText.textContent = '弱';
            } else if (strength === 3) {
                strengthFill.classList.add('fair');
                strengthText.textContent = '一般';
            } else if (strength === 4) {
                strengthFill.classList.add('good');
                strengthText.textContent = '良好';
            } else {
                strengthFill.classList.add('strong');
                strengthText.textContent = '强';
            }
        }
        
        // 社交登录处理
        function handleSocialLogin(provider) {
            // 这里可以集成实际的社交登录SDK
            console.log(`Social login with ${provider}`);
            const errorDiv = document.getElementById('login-error');
            showError(errorDiv, `${provider} 登录功能即将推出`);
        }
        
        // 处理登录表单提交
        async function handleLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const rememberMe = document.getElementById('remember-me').checked;
            const errorDiv = document.getElementById('login-error');
            
            if (!email || !password) {
                showError(errorDiv, '请填写所有字段');
                return;
            }
            
            // 邮箱格式验证
            const isEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            
            if (!isEmail) {
                showError(errorDiv, '请输入有效的邮箱地址');
                return;
            }
            
            try {
                const response = await window.backendService.login({ 
                    username: email, // 后端仍使用username字段
                    password,
                    rememberMe
                });
                
                if (response.success) {
                    if (rememberMe) {
                        localStorage.setItem('rememberLogin', 'true');
                    }
                    
                    // 调用登录成功处理函数
                    onLoginSuccess();
                } else {
                    showError(errorDiv, response.message || '登录失败');
                }
            } catch (error) {
                showError(errorDiv, '登录失败：' + error.message);
            }
        }
        
        // 处理注册表单提交
        async function handleRegister(event) {
            event.preventDefault();
            
            const email = document.getElementById('register-email').value;
            const username = document.getElementById('register-username').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            const agreeTerms = document.getElementById('agree-terms').checked;
            const errorDiv = document.getElementById('register-error');
            
            if (!email || !username || !password || !confirmPassword) {
                showError(errorDiv, '请填写所有字段');
                return;
            }
            
            if (!agreeTerms) {
                showError(errorDiv, '请同意服务条款和隐私政策');
                return;
            }
            
            if (password !== confirmPassword) {
                showError(errorDiv, '密码不匹配');
                return;
            }
            
            // 密码强度检查
            const { strength } = checkPasswordStrength(password);
            if (strength < 3) {
                showError(errorDiv, '密码强度太弱，请设置更强的密码');
                return;
            }
            
            try {
                const response = await window.backendService.register({ 
                    username: username,
                    email: email,
                    password 
                });
                
                if (response.success) {
                    // 注册成功，自动登录
                    onLoginSuccess();
                } else {
                    showError(errorDiv, response.message || '注册失败');
                }
            } catch (error) {
                showError(errorDiv, '注册失败：' + error.message);
            }
        }
        
        // 显示错误信息
        function showError(errorDiv, message) {
            if (errorDiv) {
                errorDiv.textContent = message;
                errorDiv.style.display = 'block';
                setTimeout(() => {
                    errorDiv.style.display = 'none';
                }, 5000);
            }
        }
        
        // 更新导航状态
        function updateNavigation(activePageId) {
            document.querySelectorAll('.tab-item').forEach(tab => {
                tab.classList.remove('active');
            });
            
            const activeTab = document.querySelector(`[data-page="${activePageId}"]`);
            if (activeTab) {
                activeTab.classList.add('active');
            }
        }
        
        // 应用启动时的认证检查和初始化
        function initializeApp() {
            console.log('应用启动，进行认证检查');
            
            // 检查用户登录状态
            const isLoggedIn = isUserLoggedIn();
            
            if (isLoggedIn) {
                console.log('用户已登录，进入主页面');
                // 用户已登录，显示主页面
                showPage('home');
                updateNavigation('home');
                // 显示底部导航栏
                const bottomNav = document.querySelector('.bottom-nav');
                if (bottomNav) {
                    bottomNav.style.display = 'flex';
                }
                // 更新认证状态UI
                checkAuthStatus();
            } else {
                console.log('用户未登录，显示登录页面');
                // 用户未登录，直接显示登录页面
                showPage('login');
                updateNavigation('login');
                // 隐藏底部导航栏（登录时不需要）
                const bottomNav = document.querySelector('.bottom-nav');
                if (bottomNav) {
                    bottomNav.style.display = 'none';
                }
            }
        }
        
        // 登录成功后的处理
        function onLoginSuccess() {
            console.log('登录成功，切换到主页面');
            // 显示底部导航栏
            const bottomNav = document.querySelector('.bottom-nav');
            if (bottomNav) {
                bottomNav.style.display = 'flex';
            }
            
            // 切换到主页面
            showPage('home');
            updateNavigation('home');
            
            // 更新认证状态
            checkAuthStatus();
        }
        
        // 登出处理
        function handleLogout() {
            console.log('用户登出');
            // 清除认证信息
            localStorage.removeItem('auth_token');
            localStorage.removeItem('rememberLogin');
            
            // 隐藏底部导航栏
            const bottomNav = document.querySelector('.bottom-nav');
            if (bottomNav) {
                bottomNav.style.display = 'none';
            }
            
            // 返回登录页面
            showPage('login');
            updateNavigation('login');
            
            // 更新认证状态
            checkAuthStatus();
        }
        
        // 确保I18n在DOM加载完成后立即初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM加载完成，检查I18nManager状态');
            if (window.I18nManager) {
                console.log('I18nManager已存在，当前语言:', window.I18nManager.getCurrentLanguage());
                // 强制更新页面文本
                setTimeout(() => {
                    window.I18nManager.updatePageTexts();
                    console.log('强制更新页面文本完成');
                }, 100);
            } else {
                console.error('I18nManager未找到');
            }
            
            // 初始化页面导航（仅在已登录状态下有效）
            document.querySelectorAll('.tab-item').forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetPage = this.getAttribute('data-page');
                    
                    // 检查是否需要登录
                    if (!isUserLoggedIn()) {
                        console.log('用户未登录，无法访问页面');
                        return;
                    }
                    
                    showPage(targetPage);
                    updateNavigation(targetPage);
                });
            });
            
            // 绑定登录表单
            const loginForm = document.getElementById('login-form');
            if (loginForm) {
                loginForm.addEventListener('submit', handleLogin);
            }
            
            // 绑定注册表单
            const registerForm = document.getElementById('register-form');
            if (registerForm) {
                registerForm.addEventListener('submit', handleRegister);
            }
            
            // 绑定页面切换链接
            const showRegisterLink = document.getElementById('show-register');
            const showLoginLink = document.getElementById('show-login');
            
            if (showRegisterLink) {
                showRegisterLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    showPage('register');
                    updateNavigation('login');
                });
            }
            
            if (showLoginLink) {
                showLoginLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    showPage('login');
                    updateNavigation('login');
                });
            }
            
            // 绑定社交登录按钮
            document.querySelectorAll('.social-login-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    const provider = this.dataset.provider;
                    handleSocialLogin(provider);
                });
            });
            
            // 绑定密码可见性切换
            document.querySelectorAll('.password-toggle').forEach(toggle => {
                toggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    const inputId = this.dataset.target;
                    togglePasswordVisibility(inputId, this);
                });
            });
            
            // 绑定密码强度检测
            const registerPassword = document.getElementById('register-password');
            const passwordStrength = document.getElementById('password-strength');
            
            if (registerPassword && passwordStrength) {
                registerPassword.addEventListener('input', function() {
                    updatePasswordStrength(this.value, passwordStrength);
                });
            }
            
            // 绑定登出按钮（如果存在）
            const logoutBtn = document.getElementById('logout-btn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    handleLogout();
                });
            }
            
            // 应用启动时进行认证检查
            initializeApp();
        });
    </script>

    <script>
        // 确保所有必要的函数都可用
        document.addEventListener('DOMContentLoaded', function() {
            console.log("自动会话创建功能已加载");
            
            // 优化自动滚动观察器，减少跳变
            let scrollTimeout;
            const observer = new MutationObserver(function(mutations) {
                // 防抖处理，避免频繁滚动
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(() => {
                    const chatContainer = document.querySelector('.chat-container');
                    if (chatContainer) {
                        // 使用requestAnimationFrame确保平滑滚动
                        requestAnimationFrame(() => {
                            // 调整滚动位置，留出适当的底部空间
                        const targetScrollTop = chatContainer.scrollHeight - chatContainer.clientHeight - 50;
                        chatContainer.scrollTop = Math.max(0, targetScrollTop);
                        });
                    }
                }, 50);
            });
            
            // 开始观察消息容器的变化
            const chatMessages = document.getElementById('chat-messages');
            if (chatMessages) {
                observer.observe(chatMessages, { childList: true, subtree: true });
                console.log("自动滚动观察器已启动");
            }
            
            // 直接绑定会话菜单触发器的点击事件 - 确保即使在页面加载完成后也能正常工作
            setTimeout(function() {
                // 为所有会话的菜单触发器添加内联事件
                document.querySelectorAll('.session-menu-trigger').forEach(function(trigger) {
                    // 清除已有的事件处理函数
                    const newTrigger = trigger.cloneNode(true);
                    if (trigger.parentNode) {
                        trigger.parentNode.replaceChild(newTrigger, trigger);
                        
                        // 添加内联事件处理函数
                        newTrigger.setAttribute('onclick', 
                            "window.handleSessionMenuClick(event, this.parentNode, this);");
                    }
                });
                console.log("会话菜单触发器事件已重新绑定");
            }, 1000); // 延迟1秒执行，确保页面完全加载
        });
    </script>
    
    <!-- 平台特定初始化 -->
    <script src="js/platform-init.js"></script>
    

</body>
</html>