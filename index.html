<!DOCTYPE html>
<html lang="zh-CN" id="main-html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="">
    <meta name="desc-key" content="app.description">
    <meta name="title-key" content="app.name">
    <meta name="theme-color" content="#6c5ce7">
    <title></title>
    
    <!-- PWA支持 -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    
    <!-- 样式表 -->
    <link rel="stylesheet" href="css/style.css?v=20250128-intl">
    <link rel="stylesheet" href="css/i18n.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- 跨平台适配器 -->
    <script src="config/platform-config.js"></script>
    <script src="adapters/storage-adapter.js"></script>
    <script src="adapters/network-adapter.js"></script>
    
    <!-- 环境配置加载器 -->
    <script src="config/env-loader.js"></script>
    
    <!-- OAuth配置 -->
    <script src="config/oauth-config.js"></script>
    
    <!-- 国际化支持 -->
    <script src="config/i18n.js"></script>

    
    <!-- 后端服务 -->
    <script>document.write('<script src="api/backend-service.js?v=' + new Date().getTime() + '"><\/script>');</script>
    
    <!-- AI服务 -->
    <script src="api/ai-service.js"></script>
    
    <!-- 认证管理 -->
    <script src="js/auth.js"></script>
    
    <!-- 增强轮播组件 -->
    <script src="js/carousel-enhanced.js"></script>
    
    <!-- 主应用逻辑 -->
    <script>document.write('<script src="js/app.js?v=' + new Date().getTime() + '"><\/script>');</script>
    

    
    <!-- 预连接跨域资源 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
</head>
<body>
    <div class="app-container">


        <!-- 主内容区域 -->
        <main class="app-content">
            <!-- 首页 -->
            <div id="home-page" class="app-page">
                <!-- 首页轮播卡片 -->
                <div class="hero-carousel">
                    <div class="carousel-container">
                        <!-- 场景卡片1:聊天开场 -->
                        <div class="hero-slide active">
                            <div class="hero-background">
                                <div class="hero-pattern pattern-chat"></div>
                            </div>
                            <div class="hero-content">
                                <div class="hero-badge" data-i18n="hero.chat_opener.badge"></div>
                <h2 data-i18n="hero.chat_opener.title"></h2>
                <p data-i18n="hero.chat_opener.description"></p>
                                <div class="hero-stats">
                                    <div class="stat">
                                        <span class="stat-number">92%</span>
                                        <span class="stat-label" data-i18n="hero.chat_opener.success_rate"></span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-number">1000+</span>
                                        <span class="stat-label" data-i18n="hero.chat_opener.templates"></span>
                                    </div>
                                </div>
                                <button class="hero-cta-btn" data-i18n="hero.chat_opener.cta"></button>
                            </div>
                        </div>
                        
                        <!-- 场景卡片2:回复建议 -->
                        <div class="hero-slide">
                            <div class="hero-background">
                                <div class="hero-pattern pattern-reply"></div>
                            </div>
                            <div class="hero-content">
                                <div class="hero-badge" data-i18n="hero.reply_suggestion.badge"></div>
                <h2 data-i18n="hero.reply_suggestion.title"></h2>
                <p data-i18n="hero.reply_suggestion.description"></p>
                                <div class="hero-stats">
                                    <div class="stat">
                                        <span class="stat-number">85%</span>
                                        <span class="stat-label" data-i18n="hero.reply_suggestion.reply_rate"></span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-number" data-i18n="scenarios.reply_suggest.generation_time">5秒</span>
                                        <span class="stat-label" data-i18n="hero.reply_suggestion.generation_time"></span>
                                    </div>
                                </div>
                                <button class="hero-cta-btn" data-i18n="hero.reply_suggestion.cta"></button>
                            </div>
                        </div>
                        
                        <!-- 场景卡片3:情感分析 -->
                        <div class="hero-slide">
                            <div class="hero-background">
                                <div class="hero-pattern pattern-mood"></div>
                            </div>
                            <div class="hero-content">
                                <div class="hero-badge" data-i18n="hero.emotion_analysis.badge"></div>
                <h2 data-i18n="hero.emotion_analysis.title"></h2>
                <p data-i18n="hero.emotion_analysis.description"></p>
                                <div class="hero-stats">
                                    <div class="stat">
                                        <span class="stat-number">90%</span>
                                        <span class="stat-label" data-i18n="hero.emotion_analysis.satisfaction"></span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-number" data-i18n="hero.emotion_analysis.availability">24小时</span>
                                        <span class="stat-label" data-i18n="hero.emotion_analysis.online"></span>
                                    </div>
                                </div>
                                <button class="hero-cta-btn" data-i18n="hero.emotion_analysis.cta"></button>
                            </div>
                        </div>
                        
                        <!-- 场景卡片4:约会策划 -->
                        <div class="hero-slide">
                            <div class="hero-background">
                                <div class="hero-pattern pattern-date"></div>
                            </div>
                            <div class="hero-content">
                                <div class="hero-badge" data-i18n="hero.date_planning.badge"></div>
                <h2 data-i18n="hero.date_planning.title"></h2>
                <p data-i18n="hero.date_planning.description"></p>
                                <div class="hero-stats">
                                    <div class="stat">
                                        <span class="stat-number">78%</span>
                                        <span class="stat-label" data-i18n="hero.date_planning.success_rate"></span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-number">200+</span>
                                        <span class="stat-label" data-i18n="hero.date_planning.plans"></span>
                                    </div>
                                </div>
                                <button class="hero-cta-btn" data-i18n="hero.date_planning.cta"></button>
                            </div>
                        </div>
                        
                        <!-- 场景卡片5:矛盾化解 -->
                        <div class="hero-slide">
                            <div class="hero-background">
                                <div class="hero-pattern pattern-conflict"></div>
                            </div>
                            <div class="hero-content">
                                <div class="hero-badge" data-i18n="hero.conflict_resolution.badge"></div>
                <h2 data-i18n="hero.conflict_resolution.title"></h2>
                <p data-i18n="hero.conflict_resolution.description"></p>
                                <div class="hero-stats">
                                    <div class="stat">
                                        <span class="stat-number">75%</span>
                                        <span class="stat-label" data-i18n="hero.conflict_resolution.resolution_rate"></span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-number" data-i18n="scenarios.conflict_resolve.professional">专业</span>
                                        <span class="stat-label" data-i18n="hero.conflict_resolution.response_time"></span>
                                    </div>
                                </div>
                                <button class="hero-cta-btn" data-i18n="hero.conflict_resolution.cta"></button>
                            </div>
                        </div>
                        
                        <!-- 场景卡片6:异地恋 -->
                        <div class="hero-slide">
                            <div class="hero-background">
                                <div class="hero-pattern pattern-distance"></div>
                            </div>
                            <div class="hero-content">
                                <div class="hero-badge" data-i18n="hero.long_distance.badge"></div>
                <h2 data-i18n="hero.long_distance.title"></h2>
                <p data-i18n="hero.long_distance.description"></p>
                                <div class="hero-stats">
                                    <div class="stat">
                                        <span class="stat-number" data-i18n="scenarios.long_distance.duration">6个月+</span>
                                        <span class="stat-label" data-i18n="hero.long_distance.satisfaction"></span>
                                    </div>
                                    <div class="stat">
                                        <span class="stat-number" data-i18n="scenarios.long_distance.daily">每日</span>
                                        <span class="stat-label" data-i18n="hero.long_distance.couples"></span>
                                    </div>
                                </div>
                                <button class="hero-cta-btn" data-i18n="hero.long_distance.cta"></button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="carousel-pagination">
                        <span class="pagination-dot active"></span>
                        <span class="pagination-dot"></span>
                        <span class="pagination-dot"></span>
                        <span class="pagination-dot"></span>
                        <span class="pagination-dot"></span>
                        <span class="pagination-dot"></span>
                    </div>
                    
                    <!-- 已移除导航按钮 -->
                </div>

                <!-- 增强版即时体验区 -->
                <div class="quick-experience enhanced">
                    <div class="experience-header">
                        <h3 class="experience-title" data-i18n="demo.title">💬 AI智能助手体验</h3>
                        <p class="experience-subtitle" data-i18n="demo.subtitle">立即感受专业恋爱指导</p>
                    </div>
                    
                    <div class="demo-chat enhanced-chat">
                        <div class="chat-messages">
                            <div class="demo-message partner animated">
                                <div class="message-avatar">
                                    <div class="avatar-icon">💕</div>
                                </div>
                                <div class="message-content">
                                    <p data-i18n="demo.partner_message">Hi，今天过得怎么样？</p>
                                    <span class="message-time" data-i18n="demo.message_time">刚刚</span>
                                </div>
                            </div>
                            
                            <div class="ai-thinking">
                                <div class="thinking-dots">
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                </div>
                                <span class="thinking-text" data-i18n="demo.ai_thinking">AI正在生成回复建议...</span>
                            </div>
                        </div>
                        
                        <div class="demo-input enhanced-input">
                            <div class="input-container">
                                <input type="text" data-i18n-placeholder="demo.input_placeholder" 
                                       placeholder="输入你的回复..." readonly>
                                <div class="input-features">
                                    <span class="feature-tag" data-i18n="demo.smart_analysis">🎯 智能分析</span>
                                    <span class="feature-tag" data-i18n="demo.three_styles">💡 3种风格</span>
                                </div>
                            </div>
                            <button class="try-now-btn enhanced-btn" data-i18n="demo.try_now" 
                                    onclick="document.querySelector('.tab-item[data-page=\'chat\']').click(); setTimeout(() => { 
                                        if(window.tryNowDemoFunction) window.tryNowDemoFunction(); 
                                    }, 300);">
                                <span class="btn-text">立即体验</span>
                                <span class="btn-icon">✨</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="experience-stats">
                        <div class="stat-item">
                            <span class="stat-value">2.3秒</span>
                            <span class="stat-label" data-i18n="demo.stats.response_time">平均响应</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value">95%</span>
                            <span class="stat-label" data-i18n="demo.stats.satisfaction">满意度</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value">24/7</span>
                            <span class="stat-label" data-i18n="demo.stats.online_service">在线服务</span>
                        </div>
                    </div>
                </div>

                <!-- 情景化互动卡片区域 -->
                <div class="scenario-slider">
                    <h3 class="app-section-title" data-i18n="scenarios.solutions_title"></h3>
                    <div class="scenarios-container">
                        <!-- 场景卡片 1 -->
                        <div class="scenario-card active-scenario" data-scenario="chat-start">
                            <div class="scenario-background">
                                <div class="scenario-pattern pattern-chat"></div>
                            </div>
                            <div class="scenario-content">
                                <div class="scenario-badge" data-i18n="scenarios.chat_start.badge"></div>
                                <h4 data-i18n="scenarios.chat_start.title"></h4>
                                <p data-i18n="scenarios.chat_start.description"></p>
                                <div class="scenario-stats">
                                    <div class="mini-stat">
                                        <span class="stat-num">92%</span>
                                        <span class="stat-text" data-i18n="scenarios.chat_start.success_rate"></span>
                                    </div>
                                    <div class="mini-stat">
                                        <span class="stat-num">1000+</span>
                                        <span class="stat-text" data-i18n="scenarios.chat_start.templates"></span>
                                    </div>
                                </div>
                                <button class="scenario-btn" data-i18n="scenarios.chat_start.button"></button>
                            </div>
                        </div>

                        <!-- 场景卡片 2 -->
                        <div class="scenario-card" data-scenario="reply-suggest">
                            <div class="scenario-background">
                                <div class="scenario-pattern pattern-reply"></div>
                            </div>
                            <div class="scenario-content">
                                <div class="scenario-badge" data-i18n="scenarios.reply_suggest.badge">回复建议</div>
                                <h4 data-i18n="scenarios.reply_suggest.title">对方消息不知道怎么回？</h4>
                                <p data-i18n="scenarios.reply_suggest.description">AI分析对话情境<br>生成3种风格回复选择</p>
                                <div class="scenario-stats">
                                    <div class="mini-stat">
                                        <span class="stat-num">85%</span>
                                        <span class="stat-text" data-i18n="scenarios.reply_suggest.reply_rate">回复率</span>
                                    </div>
                                    <div class="mini-stat">
                                        <span class="stat-num" data-i18n="scenarios.reply_suggest.generation_time">5秒</span>
                                        <span class="stat-text" data-i18n="scenarios.reply_suggest.generation_time">生成</span>
                                    </div>
                                </div>
                                <button class="scenario-btn" data-i18n="scenarios.reply_suggest.button">获取建议</button>
                            </div>
                        </div>

                        <!-- 场景卡片 3 -->
                        <div class="scenario-card" data-scenario="mood-analysis">
                            <div class="scenario-background">
                                <div class="scenario-pattern pattern-mood"></div>
                            </div>
                            <div class="scenario-content">
                                <div class="scenario-badge" data-i18n="scenarios.mood_analysis.badge">情感分析</div>
                                <h4 data-i18n="scenarios.mood_analysis.title">对方心情不好怎么安慰？</h4>
                                <p data-i18n="scenarios.mood_analysis.description">AI识别情感状态<br>推荐最贴心的安慰方式</p>
                                <div class="scenario-stats">
                                    <div class="mini-stat">
                                        <span class="stat-num">90%</span>
                                        <span class="stat-text" data-i18n="scenarios.mood_analysis.satisfaction">满意度</span>
                                    </div>
                                    <div class="mini-stat">
                                        <span class="stat-num" data-i18n="hero.emotion_analysis.availability">24小时</span>
                                        <span class="stat-text" data-i18n="scenarios.mood_analysis.online">在线</span>
                                    </div>
                                </div>
                                <button class="scenario-btn" data-i18n="scenarios.mood_analysis.button">开始分析</button>
                            </div>
                        </div>

                        <!-- 场景卡片 4 -->
                        <div class="scenario-card" data-scenario="date-plan">
                            <div class="scenario-background">
                                <div class="scenario-pattern pattern-date"></div>
                            </div>
                            <div class="scenario-content">
                                <div class="scenario-badge" data-i18n="scenarios.date_plan.badge">约会策划</div>
                                <h4 data-i18n="scenarios.date_plan.title">想邀约但怕被拒绝？</h4>
                                <p data-i18n="scenarios.date_plan.description">AI分析最佳邀约时机<br>提供完美约会方案</p>
                                <div class="scenario-stats">
                                    <div class="mini-stat">
                                        <span class="stat-num">78%</span>
                                        <span class="stat-text" data-i18n="scenarios.date_plan.acceptance_rate">接受率</span>
                                    </div>
                                    <div class="mini-stat">
                                        <span class="stat-num">200+</span>
                                        <span class="stat-text" data-i18n="scenarios.date_plan.plans">方案</span>
                                    </div>
                                </div>
                                <button class="scenario-btn" data-i18n="scenarios.date_plan.button">制定方案</button>
                            </div>
                        </div>

                        <!-- 场景卡片 5 -->
                        <div class="scenario-card" data-scenario="conflict-resolve">
                            <div class="scenario-background">
                                <div class="scenario-pattern pattern-conflict"></div>
                            </div>
                            <div class="scenario-content">
                                <div class="scenario-badge" data-i18n="scenarios.conflict_resolve.badge">矛盾化解</div>
                                <h4 data-i18n="scenarios.conflict_resolve.title">和TA发生争吵了怎么办？</h4>
                                <p data-i18n="scenarios.conflict_resolve.description">AI提供和解策略<br>帮你重新修复关系</p>
                                <div class="scenario-stats">
                                    <div class="mini-stat">
                                        <span class="stat-num">75%</span>
                                        <span class="stat-text" data-i18n="scenarios.conflict_resolve.resolution_rate">和解率</span>
                                    </div>
                                    <div class="mini-stat">
                                        <span class="stat-num" data-i18n="scenarios.conflict_resolve.professional">专业</span>
                                        <span class="stat-text" data-i18n="scenarios.conflict_resolve.guidance">指导</span>
                                    </div>
                                </div>
                                <button class="scenario-btn" data-i18n="scenarios.conflict_resolve.button">寻求帮助</button>
                            </div>
                        </div>

                        <!-- 场景卡片 6 -->
                        <div class="scenario-card" data-scenario="long-distance">
                            <div class="scenario-background">
                                <div class="scenario-pattern pattern-distance"></div>
                            </div>
                            <div class="scenario-content">
                                <div class="scenario-badge" data-i18n="scenarios.long_distance.badge">异地恋</div>
                                <h4 data-i18n="scenarios.long_distance.title">异地恋如何保持感情？</h4>
                                <p data-i18n="scenarios.long_distance.description">AI制定专属沟通计划<br>让距离不再是问题</p>
                                <div class="scenario-stats">
                                    <div class="mini-stat">
                                        <span class="stat-num" data-i18n="scenarios.long_distance.duration">6个月+</span>
                                        <span class="stat-text" data-i18n="scenarios.long_distance.companionship">陪伴</span>
                                    </div>
                                    <div class="mini-stat">
                                        <span class="stat-num" data-i18n="scenarios.long_distance.daily">每日</span>
                                        <span class="stat-text" data-i18n="scenarios.long_distance.reminders">提醒</span>
                                    </div>
                                </div>
                                <button class="scenario-btn" data-i18n="scenarios.long_distance.button">开始计划</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 场景指示器 -->
                    <div class="scenario-indicators">
                        <span class="indicator-dot active"></span>
                        <span class="indicator-dot"></span>
                        <span class="indicator-dot"></span>
                        <span class="indicator-dot"></span>
                        <span class="indicator-dot"></span>
                        <span class="indicator-dot"></span>
                    </div>
                    
                    <!-- 移除场景导航按钮 -->
                </div>

                <!-- 功能区域 -->
                <div class="features-section">
                    <h3 class="section-title" data-i18n="features.main_title">💫 核心功能</h3>
                    
                    <div class="feature-item" data-feature="chat">
                        <div class="feature-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="feature-content">
                            <h3 data-i18n="features.reply_generation.title">🤖 智能回复</h3>
                            <p data-i18n="features.reply_generation.description">AI分析语境，生成个性化回复建议</p>
                        </div>
                        <i class="fas fa-chevron-right feature-arrow"></i>
                    </div>

                    <div class="feature-item" data-feature="analysis">
                        <div class="feature-icon">
                            <i class="fas fa-heart-pulse"></i>
                        </div>
                        <div class="feature-content">
                            <h3 data-i18n="features.emotion_analysis.title">❤️ 情感解读</h3>
                            <p data-i18n="features.emotion_analysis.description">深度分析对方情感状态和真实想法</p>
                        </div>
                        <i class="fas fa-chevron-right feature-arrow"></i>
                    </div>

                    <div class="feature-item" data-feature="training">
                        <div class="feature-icon">
                            <i class="fas fa-dumbbell"></i>
                        </div>
                        <div class="feature-content">
                            <h3 data-i18n="features.chat_training.title">💪 聊天训练</h3>
                            <p data-i18n="features.chat_training.description">模拟真实场景，提升沟通技巧</p>
                        </div>
                        <i class="fas fa-chevron-right feature-arrow"></i>
                    </div>

                    <div class="feature-item" data-feature="guidance">
                        <div class="feature-icon">
                            <i class="fas fa-compass"></i>
                        </div>
                        <div class="feature-content">
                            <h3 data-i18n="features.relationship_guidance.title">🧭 恋爱指导</h3>
                            <p data-i18n="features.relationship_guidance.description">专业恋爱建议，助你收获幸福</p>
                        </div>
                        <i class="fas fa-chevron-right feature-arrow"></i>
                    </div>

                    <div class="feature-item" data-feature="dating">
                        <div class="feature-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="feature-content">
                            <h3 data-i18n="features.dating_guide.title">💝 约会攻略</h3>
                            <p data-i18n="features.dating_guide.description">专业约会指导，助你约会成功</p>
                        </div>
                        <i class="fas fa-chevron-right feature-arrow"></i>
                    </div>
                </div>

                <!-- 用户故事 -->
                <div class="user-stories">
                    <h3 class="app-section-title" data-i18n="user_stories.title">用户蜕变故事</h3>
                    <div class="story-card">
                        <div class="story-header">
                            <img src="https://public.youware.com/users-website-assets/prod/216bd08a-24ab-4700-aa1b-1337e15c089e/ai-generated-8639493_1280.jpg" alt="用户头像" class="story-avatar">
                            <div class="story-user">
                                <h4 data-i18n="user_stories.story1.name">小明 <span class="success-tag" data-i18n="user_stories.story1.status">已脱单</span></h4>
                                <p data-i18n="user_stories.story1.profile">24岁 · 程序员 · 内向</p>
                            </div>
                        </div>
                        <div class="story-content">
                            <p data-i18n="user_stories.story1.content">"以前不知道怎么开场白，对话三句就结束了。用了恋语AI后，聊天话题源源不断，成功邀约了暗恋3年的女生！"</p>
                        </div>
                        <div class="story-stats">
                            <div class="stat-item">
                                <span class="stat-value" data-i18n="user_stories.story1.time_value">2周</span>
                                <span class="stat-label" data-i18n="user_stories.story1.time_label">脱单时间</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value">86%</span>
                                <span class="stat-label" data-i18n="user_stories.story1.reply_rate">回复率</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value" data-i18n="user_stories.story1.dates_value">3次</span>
                                <span class="stat-label" data-i18n="user_stories.story1.dates_label">成功约会</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 数据统计 -->
                <div class="app-card-container">
                    <h3 class="app-section-title" data-i18n="daily_assistant.title">今日助手</h3>
                    <div class="stats-card">
                        <div class="stat-group">
                            <div class="big-stat">
                                <div class="big-stat-value">15</div>
                                <div class="big-stat-label" data-i18n="daily_assistant.suggestions">今日建议</div>
                                <div class="big-stat-desc" data-i18n="daily_assistant.description">已为你生成15条聊天回复</div>
                            </div>
                            <div class="stat-row">
                                <div class="small-stat">
                                    <div class="small-stat-value">85%</div>
                                    <div class="small-stat-label" data-i18n="daily_assistant.success_rate">成功率</div>
                                </div>
                                <div class="small-stat">
                                    <div class="small-stat-value">3</div>
                                    <div class="small-stat-label" data-i18n="daily_assistant.training_count">训练次数</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 常见问题展示 -->
                <div class="app-card-container">
                    <h3 class="app-section-title" data-i18n="common_problems.title">常见聊天难题</h3>
                    <div class="problem-cards">
                        <div class="problem-card">
                            <div class="problem-image">
                                <img src="https://public.youware.com/users-website-assets/prod/216bd08a-24ab-4700-aa1b-1337e15c089e/phone-9381637_1280.png" alt="聊天问题">
                            </div>
                            <div class="problem-text">
                                <h4 data-i18n="common_problems.start_conversation.title">不知道如何开始对话？</h4>
                                <p data-i18n="common_problems.start_conversation.description">AI根据对方资料生成个性化开场白</p>
                            </div>
                        </div>
                        <div class="problem-card">
                            <div class="problem-image">
                                <img src="https://public.youware.com/users-website-assets/prod/216bd08a-24ab-4700-aa1b-1337e15c089e/cell-phone-8610559_1280.png" alt="聊天问题">
                            </div>
                            <div class="problem-text">
                                <h4 data-i18n="common_problems.no_reply.title">对方突然不回复了？</h4>
                                <p data-i18n="common_problems.no_reply.description">AI分析情况，给出专业挽回建议</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 聊天页面 -->
            <div id="chat-page" class="app-page">
                <!-- 聊天会话列表 -->
                <div class="chat-sessions">
                    <div class="sessions-header">
                        <button class="sessions-back-btn" id="sessions-back-btn">
                            <i class="fas fa-times"></i>
                        </button>
                        <h3 data-i18n="chat.sessions_title">会话列表</h3>
                        <button class="new-session-btn">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div class="sessions-search">
                        <input type="text" data-i18n-placeholder="chat.search_sessions" class="session-search-input">
                        <i class="fas fa-search session-search-icon"></i>
                    </div>
                    <div class="sessions-list">
                        <div class="session-item active" data-session-id="new-chat">
                            <div class="session-avatar">
                                <i class="fas fa-plus"></i>
                            </div>
                            <div class="session-time" data-i18n="chat.anytime">随时</div>
                            <div class="session-info">
                                <div class="session-name" data-i18n="chat.new_session">新对话</div>
                                <div class="session-preview" data-i18n="chat.start_new_chat">开始新的对话...</div>
                            </div>
                            <div class="session-menu-trigger" onclick="window.handleSessionMenuClick(event, this.parentNode, this)">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </div>
                        <!-- 示例会话 -->
                        <div class="session-item" data-session-id="session1">
                            <div class="session-avatar category-crush">
                                <i class="fas fa-heart"></i>
                            </div>
                            <div class="session-time" data-i18n="chat.yesterday">昨天</div>
                            <div class="session-info">
                                <div class="session-name" data-i18n="chat.crush_chat">暗恋对象</div>
                                <div class="session-preview" data-i18n="chat.crush_chat_preview">最近有什么新电影推荐吗...</div>
                            </div>
                            <div class="session-menu-trigger" onclick="window.handleSessionMenuClick(event, this.parentNode, this)">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </div>
                        <div class="session-item" data-session-id="session2">
                            <div class="session-avatar category-date">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <div class="session-time" data-i18n="chat.days_ago">3天前</div>
                            <div class="session-info">
                                <div class="session-name" data-i18n="chat.date_chat">周末约会</div>
                                <div class="session-preview" data-i18n="chat.date_chat_preview">那我们就这么说定了...</div>
                            </div>
                            <div class="session-menu-trigger" onclick="window.handleSessionMenuClick(event, this.parentNode, this)">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </div>
                        <!-- 更多会话项将通过JavaScript动态生成 -->
                    </div>
                    <div class="session-actions">
                        <button class="session-action-btn" id="rename-session-btn" data-i18n-title="chat.rename_session" title="重命名会话">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="session-action-btn" id="clear-session-btn" data-i18n-title="chat.clear_session" title="清空会话">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                        <button class="session-action-btn" id="manage-session-btn" data-i18n-title="chat.more_actions" title="更多操作">
                            <i class="fas fa-ellipsis-h"></i>
                        </button>
                    </div>
                </div>
                
                <div class="chat-page">
                    <!-- 聊天内容区域 -->
                    <div class="chat-content">
                        <div class="chat-container">
                            <div id="chat-messages">
                                <div class="message ai-message">
                                    <div class="message-avatar ai">
                                        <i class="fas fa-robot"></i>
                                    </div>
                                    <div class="message-content">
                                        <p data-i18n="chat.welcome_message">👋 嗨！我是恋语AI，粘贴你的聊天内容，我会帮你分析并生成回复建议。</p>
                                    </div>
                                </div>
                                <!-- 聊天消息将在这里动态生成 -->
                            </div>
                        </div>
                        
                        <div class="chat-input-wrapper">
                            <div class="chat-input-box">
                                <button class="chat-attach-btn" id="chat-attach-btn">
                                    <i class="fas fa-plus"></i>
                                </button>
                                <div class="chat-input-container">
                                    <input type="text" class="chat-input-field" data-i18n-placeholder="chat.input_placeholder">
                                </div>
                                <button class="chat-send-btn" id="chat-send-btn">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                            <div class="chat-attachments-panel" id="chat-attachments-panel">
                                <div class="attachment-option">
                                    <div class="attachment-icon">
                                        <i class="fas fa-image"></i>
                                    </div>
                                    <span data-i18n="chat.image">图片</span>
                                    <input type="file" id="image-upload" accept="image/*" hidden>
                                </div>
                                <div class="attachment-option">
                                    <div class="attachment-icon">
                                        <i class="fas fa-camera"></i>
                                    </div>
                                    <span data-i18n="chat.camera">拍照</span>
                                    <input type="file" id="camera-upload" accept="image/*" capture="camera" hidden>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 发现页面 -->
            <div id="discover-page" class="app-page">
                <div class="app-card-container">
                    <h3 class="app-section-title" data-i18n="discover.learning_center">学习中心</h3>
                    
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="feature-content">
                            <h3 data-i18n="discover.love_skills">恋爱技巧</h3>
                            <p data-i18n="discover.love_skills_desc">专业的恋爱指导课程</p>
                        </div>
                        <i class="fas fa-chevron-right feature-arrow"></i>
                    </div>

                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="feature-content">
                            <h3 data-i18n="discover.communication_art">沟通艺术</h3>
                            <p data-i18n="discover.communication_art_desc">提升聊天和沟通技巧</p>
                        </div>
                        <i class="fas fa-chevron-right feature-arrow"></i>
                    </div>

                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <div class="feature-content">
                            <h3 data-i18n="discover.psychology_test">心理测试</h3>
                            <p data-i18n="discover.psychology_test_desc">了解你的恋爱风格</p>
                        </div>
                        <i class="fas fa-chevron-right feature-arrow"></i>
                    </div>
                </div>

                <div class="app-card-container">
                    <h3 class="app-section-title" data-i18n="discover.hot_topics">热门话题</h3>
                    <div class="app-card">
                        <h4 style="margin-bottom: 8px;" data-i18n="discover.start_conversation_title">如何开始一段对话？</h4>
                        <p style="font-size: 14px; color: var(--text-light); margin-bottom: 12px;" data-i18n="discover.start_conversation_desc">学会用开放性问题和共同兴趣来打开话题...</p>
                        <div style="font-size: 12px; color: var(--primary-color);" data-i18n="discover.start_conversation_views">2.3万阅读</div>
                    </div>
                    
                    <div class="app-card">
                        <h4 style="margin-bottom: 8px;" data-i18n="discover.date_chat_title">约会时的聊天技巧</h4>
                        <p style="font-size: 14px; color: var(--text-light); margin-bottom: 12px;" data-i18n="discover.date_chat_desc">在约会中如何保持对话的趣味性和深度...</p>
                        <div style="font-size: 12px; color: var(--primary-color);" data-i18n="discover.date_chat_views">1.8万阅读</div>
                    </div>
                </div>
            </div>

            <!-- 消息页面 -->
            <div id="message-page" class="app-page">
                <div class="app-card-container">
                    <h3 class="app-section-title" data-i18n="message.system_notifications">系统通知</h3>
                    
                    <div class="app-card">
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <div style="width: 8px; height: 8px; background-color: var(--primary-color); border-radius: 50%; margin-right: 8px;"></div>
                            <span style="font-size: 16px; font-weight: 500;" data-i18n="message.lianyu_upgrade">恋语AI 升级</span>
                        </div>
                        <p style="font-size: 14px; color: var(--text-light); margin-bottom: 8px;" data-i18n="message.new_psychology_test">新增了心理测试功能，快来测试你的恋爱风格吧！</p>
                        <div style="font-size: 12px; color: var(--text-light);">2 <span data-i18n="message.hours_ago">小时前</span></div>
                    </div>

                    <div class="app-card">
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <span style="font-size: 16px; font-weight: 500;" data-i18n="message.daily_reminder">每日提醒</span>
                        </div>
                        <p style="font-size: 14px; color: var(--text-light); margin-bottom: 8px;" data-i18n="message.practice_reminder">今天还没有练习聊天呢，去聊天训练看看吧～</p>
                        <div style="font-size: 12px; color: var(--text-light);">8 <span data-i18n="message.hours_ago">小时前</span></div>
                    </div>

                    <div class="app-card">
                        <div style="display: flex; align-items: center; margin-bottom: 8px;">
                            <span style="font-size: 16px; font-weight: 500;" data-i18n="message.success_story">成功案例</span>
                        </div>
                        <p style="font-size: 14px; color: var(--text-light); margin-bottom: 8px;" data-i18n="message.success_case">恭喜用户小李成功邀约心仪对象！使用恋语AI建议成功率+50%</p>
                        <div style="font-size: 12px; color: var(--text-light);">1 <span data-i18n="message.day_ago">天前</span></div>
                    </div>
                </div>
            </div>

            <!-- 个人中心页面 -->
            <div id="profile-page" class="app-page">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <i class="fas fa-user" style="font-size: 36px; color: #aaa; margin-top: 20px;"></i>
                    </div>
                    <div class="profile-name" data-i18n="profile.username">恋语用户</div>
                    <div class="profile-bio" data-i18n="profile.bio">正在学习恋爱技巧中...</div>
                    
                    <div class="profile-stats">
                        <div class="profile-stat">
                            <div class="profile-stat-value">127</div>
                            <div class="profile-stat-label" data-i18n="profile.days_used">使用天数</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value">85%</div>
                            <div class="profile-stat-label" data-i18n="profile.success_rate">成功率</div>
                        </div>
                        <div class="profile-stat">
                            <div class="profile-stat-value">42</div>
                            <div class="profile-stat-label" data-i18n="profile.courses_learned">学习课程</div>
                        </div>
                    </div>
                </div>

                <div class="profile-menu">
                    <div class="menu-item" data-page="edit-profile">
                        <div class="menu-icon">
                            <i class="fas fa-user-edit"></i>
                        </div>
                        <div class="menu-title" data-i18n="profile.edit_profile">编辑资料</div>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </div>

                    <div class="menu-item" data-page="settings">
                        <div class="menu-icon">
                            <i class="fas fa-cog"></i>
                        </div>
                        <div class="menu-title" data-i18n="profile.settings">个性化设置</div>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </div>

                    <div class="menu-item" data-page="statistics">
                        <div class="menu-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <div class="menu-title" data-i18n="profile.statistics">数据统计</div>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </div>

                    <div class="menu-item" data-page="vip">
                        <div class="menu-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="menu-title" data-i18n="profile.vip">升级会员</div>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </div>

                    <div class="menu-item" data-page="help">
                        <div class="menu-icon">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <div class="menu-title" data-i18n="profile.help">帮助中心</div>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </div>

                    <div class="menu-item" data-page="about">
                        <div class="menu-icon">
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <div class="menu-title" data-i18n="profile.about">关于我们</div>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </div>

                    <div class="menu-item" id="language-switch-btn">
                        <div class="menu-icon">
                            <i class="fas fa-globe"></i>
                        </div>
                        <div class="menu-title" data-i18n="profile.language_switch">语言切换</div>
                        <div class="menu-value">
                            <span id="profile-current-language" data-i18n="settings.language.chinese">中文</span>
                        </div>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </div>

                    <div class="menu-item logout-item" id="logout-btn">
                        <div class="menu-icon">
                            <i class="fas fa-sign-out-alt"></i>
                        </div>
                        <div class="menu-title" data-i18n="profile.logout">退出登录</div>
                        <i class="fas fa-chevron-right menu-arrow"></i>
                    </div>
                </div>
            </div>

            <!-- 编辑资料页面 -->
            <div id="edit-profile-page" class="app-page">
                <div class="page-header">
                    <button class="back-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h2 class="page-title" data-i18n="edit_profile.title">编辑资料</h2>
                    <button class="save-btn" data-i18n="edit_profile.save">保存</button>
                </div>
                
                <div class="page-content">
                    <div class="avatar-upload">
                        <div class="avatar-preview">
                            <i class="fas fa-user"></i>
                        </div>
                        <button class="avatar-change-btn">
                            <i class="fas fa-camera"></i>
                            <span data-i18n="edit_profile.change_avatar">更换头像</span>
                        </button>
                    </div>
                    
                    <div class="form-group">
                        <label for="user-nickname" data-i18n="edit_profile.nickname">昵称</label>
                        <input type="text" id="user-nickname" class="form-input" data-i18n-value="profile.username">
                    </div>
                    
                    <div class="form-group">
                        <label for="user-bio" data-i18n="edit_profile.bio">个性签名</label>
                        <textarea id="user-bio" class="form-textarea" data-i18n-placeholder="edit_profile.bio_placeholder" data-i18n-content="profile.bio"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="user-gender" data-i18n="edit_profile.gender">性别</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="user-gender" value="male" checked>
                                <span data-i18n="edit_profile.gender_male">男</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="user-gender" value="female">
                                <span data-i18n="edit_profile.gender_female">女</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="user-gender" value="other">
                                <span data-i18n="edit_profile.gender_other">其他</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group" lang="zh-CN" id="birth-date-container">
                        <label for="user-birth" data-i18n="edit_profile.birth_date">出生日期</label>
                        <input type="date" id="user-birth" class="form-input" lang="zh-CN">
                    </div>
                    
                    <div class="form-group">
                        <label for="user-location" data-i18n="edit_profile.location">所在地区</label>
                        <div class="location-selector">
                            <select id="user-country" class="form-select">
                                <option value="" data-i18n="edit_profile.select_country">请选择国家/地区</option>
                                <option value="us">United States</option>
                                <option value="uk">United Kingdom</option>
                                <option value="ca">Canada</option>
                                <option value="au">Australia</option>
                                <option value="de">Germany</option>
                                <option value="fr">France</option>
                                <option value="jp">Japan</option>
                                <option value="kr">South Korea</option>
                                <option value="sg">Singapore</option>
                                <option value="hk">Hong Kong</option>
                                <option value="tw">Taiwan</option>
                                <option value="other">Other</option>
                            </select>
                            <select id="user-city" class="form-select">
                                <option value="" data-i18n="edit_profile.select_city">请选择城市</option>
                                <!-- 城市选项将通过JavaScript动态加载 -->
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label data-i18n="edit_profile.relationship_status">恋爱状态</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="user-relationship" value="single" checked>
                                <span data-i18n="edit_profile.single">单身</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="user-relationship" value="in-relationship">
                                <span data-i18n="edit_profile.in_relationship">恋爱中</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="user-relationship" value="complicated">
                                <span data-i18n="edit_profile.complicated">复杂</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label data-i18n="edit_profile.interests">兴趣爱好</label>
                        <div class="interest-tags">
                            <div class="interest-tag active">
                                <span data-i18n="edit_profile.interest_movies">电影</span>
                                <i class="fas fa-times"></i>
                            </div>
                            <div class="interest-tag active">
                                <span data-i18n="edit_profile.interest_travel">旅行</span>
                                <i class="fas fa-times"></i>
                            </div>
                            <div class="interest-tag active">
                                <span data-i18n="edit_profile.interest_music">音乐</span>
                                <i class="fas fa-times"></i>
                            </div>
                            <div class="interest-tag">
                                <span data-i18n="edit_profile.interest_sports">运动</span>
                                <i class="fas fa-times"></i>
                            </div>
                            <div class="interest-tag">
                                <span data-i18n="edit_profile.interest_photography">摄影</span>
                                <i class="fas fa-times"></i>
                            </div>
                            <div class="interest-tag">
                                <span data-i18n="edit_profile.interest_hiking">徒步</span>
                                <i class="fas fa-times"></i>
                            </div>
                            <div class="interest-tag add-tag">
                                <i class="fas fa-plus"></i>
                                <span data-i18n="edit_profile.add_interest">添加</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 联系方式暂时隐藏
                    <div class="form-group">
                        <label for="user-contact" data-i18n="edit_profile.contact">联系方式</label>
                        <input type="text" id="user-contact" class="form-input" data-i18n-placeholder="edit_profile.contact_placeholder">
                        <small class="form-helper" data-i18n="edit_profile.contact_note">仅对恋爱对象可见，可放心填写</small>
                    </div>
                    -->
                </div>
            </div>

            <!-- 设置页面 -->
            <div id="settings-page" class="app-page">
                <div class="page-header">
                    <button class="back-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h2 class="page-title" data-i18n="settings.title">个性化设置</h2>
                    <button class="save-btn" data-i18n="settings.save">保存</button>
                </div>
                
                <div class="page-content">
                    <div class="settings-section">
                        <h4 data-i18n="settings.appearance">外观设置</h4>
                        <div class="settings-item">
                            <div class="settings-item-info">
                                <div class="settings-item-title" data-i18n="settings.dark_mode">深色模式</div>
                                <div class="settings-item-desc" data-i18n="settings.dark_mode_desc">保护眼睛，节省电量</div>
                            </div>
                            <div class="toggle-switch">
                                <input type="checkbox" id="dark-mode-toggle" class="toggle-input">
                                <label for="dark-mode-toggle" class="toggle-label"></label>
                            </div>
                        </div>
                        <div class="settings-item">
                            <div class="settings-item-info">
                                <div class="settings-item-title" data-i18n="settings.theme_color">主题颜色</div>
                                <div class="settings-item-desc" data-i18n="settings.theme_color_desc">选择你喜欢的颜色</div>
                            </div>
                            <div class="color-options">
                                <span class="color-option active" style="background-color: #ff3e79;"></span>
                                <span class="color-option" style="background-color: #6c5ce7;"></span>
                                <span class="color-option" style="background-color: #00cec9;"></span>
                                <span class="color-option" style="background-color: #fdcb6e;"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h4 data-i18n="settings.notifications">通知设置</h4>
                        <div class="settings-item">
                            <div class="settings-item-info">
                                <div class="settings-item-title" data-i18n="settings.push_notifications">推送通知</div>
                                <div class="settings-item-desc" data-i18n="settings.push_notifications_desc">接收新消息和活动提醒</div>
                            </div>
                            <div class="toggle-switch">
                                <input type="checkbox" id="notification-toggle" class="toggle-input" checked>
                                <label for="notification-toggle" class="toggle-label"></label>
                            </div>
                        </div>
                        <div class="settings-item">
                            <div class="settings-item-info">
                                <div class="settings-item-title" data-i18n="settings.sound_alerts">声音提醒</div>
                                <div class="settings-item-desc" data-i18n="settings.sound_alerts_desc">新消息声音提示</div>
                            </div>
                            <div class="toggle-switch">
                                <input type="checkbox" id="sound-toggle" class="toggle-input" checked>
                                <label for="sound-toggle" class="toggle-label"></label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">

                    </div>
                    
                    <div class="settings-section">
                        <h4 data-i18n="settings.privacy">隐私设置</h4>
                        <div class="settings-item">
                            <div class="settings-item-info">
                                <div class="settings-item-title" data-i18n="settings.data_collection">数据收集</div>
                                <div class="settings-item-desc" data-i18n="settings.data_collection_desc">允许收集使用数据以改进服务</div>
                            </div>
                            <div class="toggle-switch">
                                <input type="checkbox" id="data-toggle" class="toggle-input" checked>
                                <label for="data-toggle" class="toggle-label"></label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 数据统计页面 -->
            <div id="statistics-page" class="app-page">
                <div class="page-header">
                    <button class="back-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h2 class="page-title" data-i18n="statistics.title">数据统计</h2>
                </div>
                
                <div class="page-content">
                    <div class="stats-summary">
                        <div class="stats-card">
                            <div class="stats-card-value">127</div>
                            <div class="stats-card-label" data-i18n="statistics.days_used">使用天数</div>
                        </div>
                        <div class="stats-card">
                            <div class="stats-card-value">356</div>
                            <div class="stats-card-label" data-i18n="statistics.total_messages">总消息数</div>
                        </div>
                        <div class="stats-card">
                            <div class="stats-card-value">85%</div>
                            <div class="stats-card-label" data-i18n="statistics.reply_rate">回复率</div>
                        </div>
                    </div>
                    
                    <div class="stats-section">
                        <h4 data-i18n="statistics.reply_assistant_usage">回复助手使用情况</h4>
                        <div class="stats-chart-container">
                            <div class="placeholder-chart">
                                <div class="stats-bar" style="height: 60%;"><span>32</span></div>
                                <div class="stats-bar" style="height: 45%;"><span>24</span></div>
                                <div class="stats-bar" style="height: 75%;"><span>40</span></div>
                                <div class="stats-bar" style="height: 30%;"><span>16</span></div>
                                <div class="stats-bar" style="height: 90%;"><span>48</span></div>
                                <div class="stats-bar" style="height: 50%;"><span>27</span></div>
                                <div class="stats-bar" style="height: 65%;"><span>35</span></div>
                            </div>
                            <div class="chart-labels">
                                <span data-i18n="statistics.day_1">一</span>
                                <span data-i18n="statistics.day_2">二</span>
                                <span data-i18n="statistics.day_3">三</span>
                                <span data-i18n="statistics.day_4">四</span>
                                <span data-i18n="statistics.day_5">五</span>
                                <span data-i18n="statistics.day_6">六</span>
                                <span data-i18n="statistics.day_7">日</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stats-section">
                        <h4 data-i18n="statistics.popular_features">常用功能排行</h4>
                        <div class="stats-list">
                            <div class="stats-list-item">
                                <div class="stats-rank">1</div>
                                <div class="stats-feature">
                                    <i class="fas fa-comment"></i>
                                    <span data-i18n="statistics.chat_opener">聊天开场</span>
                                </div>
                                <div class="stats-value" data-i18n="statistics.count_times">62次</div>
                            </div>
                            <div class="stats-list-item">
                                <div class="stats-rank">2</div>
                                <div class="stats-feature">
                                    <i class="fas fa-reply"></i>
                                    <span data-i18n="statistics.reply_suggestion">回复建议</span>
                                </div>
                                <div class="stats-value" data-i18n="statistics.count_times_47">47次</div>
                            </div>
                            <div class="stats-list-item">
                                <div class="stats-rank">3</div>
                                <div class="stats-feature">
                                    <i class="fas fa-heart"></i>
                                    <span data-i18n="statistics.emotion_analysis">情感分析</span>
                                </div>
                                <div class="stats-value" data-i18n="statistics.count_times_23">23次</div>
                            </div>
                        </div>
                    </div>
                    

                </div>
            </div>

            <!-- 会员页面 -->
            <div id="vip-page" class="app-page">
                <div class="page-header">
                    <button class="back-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h2 class="page-title" data-i18n="vip.title">升级会员</h2>
                </div>
                
                <div class="page-content">
                    <div class="vip-badges">
                        <div class="vip-badge">
                            <i class="fas fa-user"></i>
                            <span data-i18n="vip.regular_user">普通用户</span>
                        </div>
                        <div class="vip-badge-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                        <div class="vip-badge premium">
                            <i class="fas fa-crown"></i>
                            <span data-i18n="vip.premium_member">高级会员</span>
                        </div>
                    </div>
                    
                    <div class="vip-plans">
                        <div class="vip-plan-card">
                            <div class="vip-plan-header">
                                <h4 data-i18n="vip.monthly_plan">月度会员</h4>
                                <div class="vip-price">
                                    <span class="price-value">￥28</span>
                                    <span class="price-period" data-i18n="vip.per_month">/月</span>
                                </div>
                            </div>
                            <div class="vip-plan-features">
                                <div class="vip-feature">
                                    <i class="fas fa-check"></i>
                                    <span data-i18n="vip.unlimited_replies">无限回复建议</span>
                                </div>
                                <div class="vip-feature">
                                    <i class="fas fa-check"></i>
                                    <span data-i18n="vip.advanced_emotion_analysis">高级情感分析</span>
                                </div>
                                <div class="vip-feature">
                                    <i class="fas fa-check"></i>
                                    <span data-i18n="vip.date_planning">约会策划方案</span>
                                </div>
                            </div>
                            <button class="vip-select-btn" data-i18n="vip.select">选择</button>
                        </div>
                        
                        <div class="vip-plan-card recommended">
                            <div class="recommend-tag" data-i18n="vip.recommended">推荐</div>
                            <div class="vip-plan-header">
                                <h4 data-i18n="vip.yearly_plan">年度会员</h4>
                                <div class="vip-price">
                                    <span class="price-value">￥198</span>
                                    <span class="price-period" data-i18n="vip.per_year">/年</span>
                                    <div class="price-discount" data-i18n="vip.save_amount">省￥138</div>
                                </div>
                            </div>
                            <div class="vip-plan-features">
                                <div class="vip-feature">
                                    <i class="fas fa-check"></i>
                                    <span data-i18n="vip.all_monthly_benefits">所有月度会员特权</span>
                                </div>
                                <div class="vip-feature">
                                    <i class="fas fa-check"></i>
                                    <span data-i18n="vip.priority_ai_response">优先AI响应</span>
                                </div>
                                <div class="vip-feature">
                                    <i class="fas fa-check"></i>
                                    <span data-i18n="vip.exclusive_courses">专属恋爱课程</span>
                                </div>
                                <div class="vip-feature">
                                    <i class="fas fa-check"></i>
                                    <span data-i18n="vip.personal_advisor">1对1恋爱顾问</span>
                                </div>
                            </div>
                            <button class="vip-select-btn" data-i18n="vip.select">选择</button>
                        </div>
                    </div>
                    
                    <div class="vip-benefits">
                        <h4 data-i18n="vip.member_benefits">会员特权</h4>
                        <div class="benefits-grid">
                            <div class="benefit-item">
                                <i class="fas fa-infinity"></i>
                                <div class="benefit-title" data-i18n="vip.unlimited_usage">无限使用</div>
                                <div class="benefit-desc" data-i18n="vip.unlimited_usage_desc">不限次数使用所有功能</div>
                            </div>
                            <div class="benefit-item">
                                <i class="fas fa-bolt"></i>
                                <div class="benefit-title" data-i18n="vip.priority_response">优先响应</div>
                                <div class="benefit-desc" data-i18n="vip.priority_response_desc">更快的AI回复速度</div>
                            </div>
                            <div class="benefit-item">
                                <i class="fas fa-ad"></i>
                                <div class="benefit-title" data-i18n="vip.ad_free">无广告</div>
                                <div class="benefit-desc" data-i18n="vip.ad_free_desc">享受无广告打扰体验</div>
                            </div>
                            <div class="benefit-item">
                                <i class="fas fa-graduation-cap"></i>
                                <div class="benefit-title" data-i18n="vip.exclusive_courses_title">专属课程</div>
                                <div class="benefit-desc" data-i18n="vip.exclusive_courses_desc">高级恋爱技巧指导</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 帮助中心页面 -->
            <div id="help-page" class="app-page">
                <div class="page-header">
                    <button class="back-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h2 class="page-title" data-i18n="help.title">帮助中心</h2>
                </div>
                
                <div class="page-content">
                    <div class="search-box">
                        <input type="text" data-i18n-placeholder="help.search_placeholder">
                        <i class="fas fa-search"></i>
                    </div>
                    
                    <div class="faq-section">
                        <div class="faq-item">
                            <div class="faq-question">
                                <span data-i18n="help.faq1_question">如何使用聊天开场功能？</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <span data-i18n="help.faq1_answer">点击首页"聊天开场"卡片，输入对方的基本信息（如兴趣爱好、性格特点等），系统将为你生成个性化的开场白。你可以直接使用生成的内容，或根据需要进行修改。</span>
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question">
                                <span data-i18n="help.faq2_question">会员费用如何收取？</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <span data-i18n="help.faq2_answer">会员费用将在您确认订阅后立即从您选择的支付方式中扣除。月度会员每月自动续费，年度会员每年自动续费，除非您在下一个计费周期前取消订阅。</span>
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question">
                                <span data-i18n="help.faq3_question">如何保护我的隐私？</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <span data-i18n="help.faq3_answer">恋语AI高度重视用户隐私。您输入的所有聊天内容和个人信息都经过加密处理，不会被用于训练模型或分享给第三方。您也可以在设置中随时关闭数据收集功能。</span>
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <div class="faq-question">
                                <span data-i18n="help.faq4_question">如何取消会员订阅？</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="faq-answer">
                                <span data-i18n="help.faq4_answer">您可以在"个人中心"→"会员管理"中找到取消订阅选项。取消后，您仍可以使用会员服务至当前计费周期结束。</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="contact-section">
                        <h4 data-i18n="help.contact_support">联系客服</h4>
                        <p data-i18n="help.contact_description">如果你的问题没有得到解答，可以通过以下方式联系我们</p>
                        <div class="contact-options">
                            <a href="#" class="contact-btn">
                                <i class="fas fa-envelope"></i>
                                <span data-i18n="help.send_email">发送邮件</span>
                            </a>
                            <a href="#" class="contact-btn">
                                <i class="fab fa-weixin"></i>
                                <span data-i18n="help.wechat_support">微信客服</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 登录页面 -->
            <div id="login-page" class="app-page">
                <div class="page-content">
                    <div class="login-container">
                        <div class="app-logo">
                            <i class="fas fa-heart"></i>
                            <h2 data-i18n="app.name">LoveAI</h2>
                            <p class="welcome-text" data-i18n="login.welcome">Welcome back! Sign in to continue</p>
                        </div>
                        

                        
                        <!-- 测试账户提示 -->
                        <div class="test-account-hint" style="background: #e3f2fd; border: 1px solid #2196f3; border-radius: 8px; padding: 12px; margin-bottom: 20px; font-size: 14px; color: #1976d2;">
                            <i class="fas fa-info-circle" style="margin-right: 8px;"></i>
                            <strong>测试账户：</strong> demo@test.com / 123456
                            <button type="button" id="fill-demo-account" style="margin-left: 10px; padding: 4px 8px; background: #2196f3; color: white; border: none; border-radius: 4px; font-size: 12px; cursor: pointer;">一键填入</button>
                        </div>
                        
                        <form id="login-form" class="auth-form">
                            <div class="form-group">
                                <label for="login-email" data-i18n="login.email">Email Address</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-envelope input-icon"></i>
                                    <input type="email" id="login-email" name="email" required 
                                           data-i18n-placeholder="login.email_placeholder"
                                           autocomplete="email">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="login-password" data-i18n="login.password">Password</label>
                                <div class="input-wrapper password-wrapper">
                                    <i class="fas fa-lock input-icon"></i>
                                    <input type="password" id="login-password" name="password" required 
                                           data-i18n-placeholder="login.password_placeholder"
                                           autocomplete="current-password">
                                    <button type="button" class="password-toggle" id="login-password-toggle" data-target="login-password">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="form-options">
                                <label class="checkbox-wrapper">
                                    <input type="checkbox" id="remember-me">
                                    <span class="checkmark"></span>
                                    <span data-i18n="login.remember_me">Remember me</span>
                                </label>
                                <a href="#" class="forgot-password" data-i18n="login.forgot_password">Forgot Password?</a>
                            </div>
                            
                            <button type="submit" class="auth-btn primary" data-i18n="login.submit">Sign In</button>
                        </form>
                        
                        <div class="auth-links">
                            <span data-i18n="login.no_account_text">Don't have an account?</span>
                            <a href="#" id="show-register" data-i18n="login.sign_up">Sign Up</a>
                        </div>
                        
                        <div class="auth-error" id="login-error" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <!-- 注册页面 -->
            <div id="register-page" class="app-page">
                <div class="page-header">
                    <h2 class="page-title" data-i18n="register.title">Sign Up</h2>
                </div>
                
                <div class="page-content">
                    <div class="register-container">
                        <div class="app-logo">
                            <i class="fas fa-heart"></i>
                            <h2 data-i18n="app.name">LoveAI</h2>
                            <p class="welcome-text" data-i18n="register.welcome">Create your account to get started</p>
                        </div>
                        

                        
                        <form id="register-form" class="auth-form">
                            <div class="form-group">
                                <label for="register-email" data-i18n="register.email">Email Address</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-envelope input-icon"></i>
                                    <input type="email" id="register-email" name="email" required 
                                           data-i18n-placeholder="register.email_placeholder"
                                           autocomplete="email">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="register-username" data-i18n="register.username">Username</label>
                                <div class="input-wrapper">
                                    <i class="fas fa-user input-icon"></i>
                                    <input type="text" id="register-username" name="username" required 
                                           data-i18n-placeholder="register.username_placeholder"
                                           autocomplete="username">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="register-password" data-i18n="register.password">Password</label>
                                <div class="input-wrapper password-wrapper">
                                    <i class="fas fa-lock input-icon"></i>
                                    <input type="password" id="register-password" name="password" required 
                                           data-i18n-placeholder="register.password_placeholder"
                                           autocomplete="new-password">
                                    <button type="button" class="password-toggle" id="register-password-toggle" data-target="register-password">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="password-strength" id="password-strength">
                                    <div class="strength-bar">
                                        <div class="strength-fill"></div>
                                    </div>
                                    <span class="strength-text" data-i18n="register.password_strength">Password strength</span>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="register-confirm-password" data-i18n="register.confirm_password">Confirm Password</label>
                                <div class="input-wrapper password-wrapper">
                                    <i class="fas fa-lock input-icon"></i>
                                    <input type="password" id="register-confirm-password" name="confirmPassword" required 
                                           data-i18n-placeholder="register.confirm_password_placeholder"
                                           autocomplete="new-password">
                                    <button type="button" class="password-toggle" id="register-confirm-password-toggle" data-target="register-confirm-password">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="form-options">
                                <label class="checkbox-wrapper">
                                    <input type="checkbox" id="agree-terms" required>
                                    <span class="checkmark"></span>
                                    <span data-i18n="register.agree_terms">I agree to the <a href="#" class="terms-link">Terms of Service</a> and <a href="#" class="privacy-link">Privacy Policy</a></span>
                                </label>
                            </div>
                            
                            <button type="submit" class="auth-btn primary" data-i18n="register.submit">Create Account</button>
                        </form>
                        
                        <div class="auth-links">
                            <span data-i18n="register.has_account_text">Already have an account?</span>
                            <a href="#" id="show-login" data-i18n="register.sign_in">Sign In</a>
                        </div>
                        
                        <div class="auth-error" id="register-error" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <!-- 关于我们页面 -->
            <div id="about-page" class="app-page">
                <div class="page-header">
                    <button class="back-btn">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h2 class="page-title" data-i18n="about.title">关于我们</h2>
                </div>
                
                <div class="page-content">
                    <div class="app-info">
                        <div class="app-logo">
                            <i class="fas fa-heart"></i>
                            <h2 data-i18n="about.app_name">恋语AI</h2>
                        </div>
                        <div class="app-version" data-i18n="about.version">版本 1.2.3</div>
                        <p class="app-description">
                            <span data-i18n="about.app_description">恋语AI是一款专注于解决恋爱沟通难题的智能助手，基于先进的人工智能技术，为用户提供聊天开场、回复建议、情感分析等功能，让恋爱交流不再困难。</span>
                        </p>
                    </div>
                    
                    <div class="team-section">
                        <h4 data-i18n="about.our_team">我们的团队</h4>
                        <p data-i18n="about.team_description">恋语AI由一群热爱科技、关注情感的年轻人创立，团队成员来自顶尖互联网公司和心理学研究机构，致力于用AI技术解决情感交流问题。</p>
                    </div>
                    
                    <div class="mission-section">
                        <h4 data-i18n="about.our_mission">我们的使命</h4>
                        <p data-i18n="about.mission_description">让每个人都能轻松自信地进行情感交流，建立健康的恋爱关系。</p>
                    </div>
                    
                    <div class="social-section">
                        <h4 data-i18n="about.follow_us">关注我们</h4>
                        <div class="social-links">
                            <a href="#" class="social-link">
                                <i class="fab fa-weibo"></i>
                            </a>
                            <a href="#" class="social-link">
                                <i class="fab fa-weixin"></i>
                            </a>
                            <a href="#" class="social-link">
                                <i class="fas fa-globe"></i>
                            </a>
                        </div>
                    </div>
                    
                    <div class="terms-section">
                        <a href="#" data-i18n="about.terms_of_service">服务条款</a>
                        <a href="#" data-i18n="about.privacy_policy">隐私政策</a>
                    </div>
                    
                    <div class="copyright">
                        <span data-i18n="about.copyright">© 2025 恋语AI团队 版权所有</span>
                    </div>
                </div>
            </div>
        </main>



        <!-- 底部导航栏 -->
        <nav class="bottom-nav">
            <div class="tab-item active" data-page="home">
                <i class="fas fa-home tab-icon"></i>
                <span class="tab-label" data-i18n="bottom_nav.home">首页</span>
            </div>
            <div class="tab-item" data-page="chat">
                <i class="fas fa-comments tab-icon"></i>
                <span class="tab-label" data-i18n="bottom_nav.chat">聊天</span>
            </div>
            <div class="tab-item" data-page="discover">
                <i class="fas fa-compass tab-icon"></i>
                <span class="tab-label" data-i18n="bottom_nav.discover">发现</span>
            </div>
            <div class="tab-item" data-page="message">
                <i class="fas fa-bell tab-icon"></i>
                <span class="tab-label" data-i18n="bottom_nav.message">消息</span>
            </div>
            <div class="tab-item" data-page="profile" id="profile-tab">
                <i class="fas fa-user tab-icon"></i>
                <span class="tab-label" data-i18n="bottom_nav.profile">我的</span>
            </div>
        </nav>
    </div>


    <script>
        // 页面导航功能
        function showPage(pageId) {
            // 隐藏所有页面
            document.querySelectorAll('.app-page').forEach(page => {
                page.classList.remove('active');
            });
            
            // 显示目标页面
            const targetPage = document.getElementById(pageId + '-page');
            if (targetPage) {
                targetPage.classList.add('active');
            }
            
            // 设置body的当前页面属性
            document.body.setAttribute('data-current-page', pageId);
            
            // 控制底部导航栏显示
            const bottomNav = document.querySelector('.bottom-nav');
            if (bottomNav) {
                if (pageId === 'login' || pageId === 'register') {
                    // 完全隐藏底部导航栏
                    bottomNav.style.cssText = 'display: none !important; visibility: hidden !important; opacity: 0 !important; pointer-events: none !important; box-shadow: none !important; border: none !important; transform: translateY(100%) !important; height: 0 !important; overflow: hidden !important; position: absolute !important; top: -9999px !important;';
                    bottomNav.classList.add('hidden');
                    bottomNav.setAttribute('data-hidden', 'true');
                } else {
                    // 恢复底部导航栏显示
                    bottomNav.style.cssText = '';
                    bottomNav.classList.remove('hidden');
                    bottomNav.removeAttribute('data-hidden');
                    bottomNav.style.display = 'flex';
                }
            }
        }
        
        // 检查用户是否已登录
        function isUserLoggedIn() {
            const token = localStorage.getItem('auth_token');
            return token && token !== 'null' && token !== '';
        }
        
        // 检查认证状态并更新UI
        function checkAuthStatus() {
            const isLoggedIn = isUserLoggedIn();
            const profileTab = document.getElementById('profile-tab');
            
            // 个人资料tab始终显示，因为只有登录用户才能看到底部导航栏
            if (profileTab) {
                profileTab.style.display = 'flex';
            }
        }
        
        // 密码可见性切换
        function togglePasswordVisibility(inputId, toggleBtn) {
            const input = document.getElementById(inputId);
            const icon = toggleBtn.querySelector('i');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.className = 'fas fa-eye-slash';
            } else {
                input.type = 'password';
                icon.className = 'fas fa-eye';
            }
        }
        
        // 密码强度检测
        function checkPasswordStrength(password) {
            let strength = 0;
            let feedback = [];
            
            // 长度检查
            if (password.length >= 8) strength += 1;
            else feedback.push('至少8个字符');
            
            // 包含小写字母
            if (/[a-z]/.test(password)) strength += 1;
            else feedback.push('包含小写字母');
            
            // 包含大写字母
            if (/[A-Z]/.test(password)) strength += 1;
            else feedback.push('包含大写字母');
            
            // 包含数字
            if (/\d/.test(password)) strength += 1;
            else feedback.push('包含数字');
            
            // 包含特殊字符
            if (/[!@#$%^&*(),.?":{}|<>]/.test(password)) strength += 1;
            else feedback.push('包含特殊字符');
            
            return { strength, feedback };
        }
        
        // 更新密码强度显示
        function updatePasswordStrength(password, strengthElement) {
            const { strength } = checkPasswordStrength(password);
            const strengthFill = strengthElement.querySelector('.strength-fill');
            const strengthText = strengthElement.querySelector('.strength-text');
            
            // 移除所有强度类
            strengthFill.className = 'strength-fill';
            
            if (password.length === 0) {
                strengthText.textContent = '';
                return;
            }
            
            if (strength <= 2) {
                strengthFill.classList.add('weak');
                strengthText.textContent = '弱';
            } else if (strength === 3) {
                strengthFill.classList.add('fair');
                strengthText.textContent = '一般';
            } else if (strength === 4) {
                strengthFill.classList.add('good');
                strengthText.textContent = '良好';
            } else {
                strengthFill.classList.add('strong');
                strengthText.textContent = '强';
            }
        }
        
        // 社交登录处理
        function handleSocialLogin(provider) {
            // 这里可以集成实际的社交登录SDK
            console.log(`Social login with ${provider}`);
            const errorDiv = document.getElementById('login-error');
            showError(errorDiv, `${provider} 登录功能即将推出`);
        }
        
        // 处理登录表单提交
        async function handleLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const rememberMe = document.getElementById('remember-me').checked;
            const errorDiv = document.getElementById('login-error');
            
            if (!email || !password) {
                showError(errorDiv, '请填写所有字段');
                return;
            }
            
            // 邮箱格式验证
            const isEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            
            if (!isEmail) {
                showError(errorDiv, '请输入有效的邮箱地址');
                return;
            }
            
            try {
                const response = await window.backendService.login({ 
                    username: email, // 后端仍使用username字段
                    password,
                    rememberMe
                });
                
                if (response.success) {
                    if (rememberMe) {
                        localStorage.setItem('rememberLogin', 'true');
                    }
                    
                    // 调用登录成功处理函数
                    onLoginSuccess();
                } else {
                    showError(errorDiv, response.message || '登录失败');
                }
            } catch (error) {
                showError(errorDiv, '登录失败：' + error.message);
            }
        }
        
        // 处理注册表单提交
        async function handleRegister(event) {
            event.preventDefault();
            
            const email = document.getElementById('register-email').value;
            const username = document.getElementById('register-username').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            const agreeTerms = document.getElementById('agree-terms').checked;
            const errorDiv = document.getElementById('register-error');
            
            if (!email || !username || !password || !confirmPassword) {
                showError(errorDiv, '请填写所有字段');
                return;
            }
            
            if (!agreeTerms) {
                showError(errorDiv, '请同意服务条款和隐私政策');
                return;
            }
            
            if (password !== confirmPassword) {
                showError(errorDiv, '密码不匹配');
                return;
            }
            
            // 密码强度检查
            const { strength } = checkPasswordStrength(password);
            if (strength < 3) {
                showError(errorDiv, '密码强度太弱，请设置更强的密码');
                return;
            }
            
            try {
                const response = await window.backendService.register({ 
                    username: username,
                    email: email,
                    password 
                });
                
                if (response.success) {
                    // 注册成功，自动登录
                    onLoginSuccess();
                } else {
                    showError(errorDiv, response.message || '注册失败');
                }
            } catch (error) {
                showError(errorDiv, '注册失败：' + error.message);
            }
        }
        
        // 显示错误信息
        function showError(errorDiv, message) {
            if (errorDiv) {
                errorDiv.textContent = message;
                errorDiv.style.display = 'block';
                setTimeout(() => {
                    errorDiv.style.display = 'none';
                }, 5000);
            }
        }
        
        // 更新导航状态
        function updateNavigation(activePageId) {
            document.querySelectorAll('.tab-item').forEach(tab => {
                tab.classList.remove('active');
            });
            
            const activeTab = document.querySelector(`[data-page="${activePageId}"]`);
            if (activeTab) {
                activeTab.classList.add('active');
            }
        }
        
        // 应用启动时的认证检查和初始化
        function initializeApp() {
            console.log('应用启动，进行认证检查');
            
            // 检查用户登录状态
            const isLoggedIn = isUserLoggedIn();
            
            if (isLoggedIn) {
                console.log('用户已登录，进入主页面');
                // 用户已登录，显示主页面
                showPage('home');
                updateNavigation('home');
                // 显示底部导航栏
                const bottomNav = document.querySelector('.bottom-nav');
                if (bottomNav) {
                    bottomNav.style.display = 'flex';
                }
                // 更新认证状态UI
                checkAuthStatus();
            } else {
                console.log('用户未登录，显示登录页面');
                // 用户未登录，直接显示登录页面
                showPage('login');
                updateNavigation('login');
                // 隐藏底部导航栏（登录时不需要）
                const bottomNav = document.querySelector('.bottom-nav');
                if (bottomNav) {
                    bottomNav.style.display = 'none';
                }
            }
        }
        
        // 登录成功后的处理
        function onLoginSuccess() {
            console.log('登录成功，切换到主页面');
            // 显示底部导航栏
            const bottomNav = document.querySelector('.bottom-nav');
            if (bottomNav) {
                bottomNav.style.display = 'flex';
            }
            
            // 切换到主页面
            showPage('home');
            updateNavigation('home');
            
            // 更新认证状态
            checkAuthStatus();
        }
        
        // 登出处理
        function handleLogout() {
            console.log('用户登出');
            // 清除认证信息
            localStorage.removeItem('auth_token');
            localStorage.removeItem('rememberLogin');
            
            // 隐藏底部导航栏
            const bottomNav = document.querySelector('.bottom-nav');
            if (bottomNav) {
                bottomNav.style.display = 'none';
            }
            
            // 返回登录页面
            showPage('login');
            updateNavigation('login');
            
            // 更新认证状态
            checkAuthStatus();
        }
        
        // 确保I18n在DOM加载完成后立即初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM加载完成，检查I18nManager状态');
            if (window.I18nManager) {
                console.log('I18nManager已存在，当前语言:', window.I18nManager.getCurrentLanguage());
                // 强制更新页面文本
                setTimeout(() => {
                    window.I18nManager.updatePageTexts();
                    console.log('强制更新页面文本完成');
                }, 100);
            } else {
                console.error('I18nManager未找到');
            }
            
            // 初始化页面导航（仅在已登录状态下有效）
            document.querySelectorAll('.tab-item').forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetPage = this.getAttribute('data-page');
                    
                    // 检查是否需要登录
                    if (!isUserLoggedIn()) {
                        console.log('用户未登录，无法访问页面');
                        return;
                    }
                    
                    showPage(targetPage);
                    updateNavigation(targetPage);
                });
            });
            
            // 绑定登录表单
            const loginForm = document.getElementById('login-form');
            if (loginForm) {
                loginForm.addEventListener('submit', handleLogin);
            }
            
            // 绑定注册表单
            const registerForm = document.getElementById('register-form');
            if (registerForm) {
                registerForm.addEventListener('submit', handleRegister);
            }
            
            // 绑定页面切换链接
            const showRegisterLink = document.getElementById('show-register');
            const showLoginLink = document.getElementById('show-login');
            
            if (showRegisterLink) {
                showRegisterLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    showPage('register');
                    updateNavigation('login');
                });
            }
            
            if (showLoginLink) {
                showLoginLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    showPage('login');
                    updateNavigation('login');
                });
            }
            
            // 绑定社交登录按钮
            document.querySelectorAll('.social-login-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.preventDefault();
                    const provider = this.dataset.provider;
                    handleSocialLogin(provider);
                });
            });
            
            // 绑定密码可见性切换
            document.querySelectorAll('.password-toggle').forEach(toggle => {
                toggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    const inputId = this.dataset.target;
                    togglePasswordVisibility(inputId, this);
                });
            });
            
            // 绑定密码强度检测
            const registerPassword = document.getElementById('register-password');
            const passwordStrength = document.getElementById('password-strength');
            
            if (registerPassword && passwordStrength) {
                registerPassword.addEventListener('input', function() {
                    updatePasswordStrength(this.value, passwordStrength);
                });
            }
            
            // 绑定登出按钮（如果存在）
            const logoutBtn = document.getElementById('logout-btn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    handleLogout();
                });
            }
            
            // 应用启动时进行认证检查
            initializeApp();
        });
    </script>

    <script>
        // 确保所有必要的函数都可用
        document.addEventListener('DOMContentLoaded', function() {
            console.log("自动会话创建功能已加载");
            
            // 优化自动滚动观察器，减少跳变
            let scrollTimeout;
            const observer = new MutationObserver(function(mutations) {
                // 防抖处理，避免频繁滚动
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(() => {
                    const chatContainer = document.querySelector('.chat-container');
                    if (chatContainer) {
                        // 使用requestAnimationFrame确保平滑滚动
                        requestAnimationFrame(() => {
                            // 调整滚动位置，留出适当的底部空间
                        const targetScrollTop = chatContainer.scrollHeight - chatContainer.clientHeight - 50;
                        chatContainer.scrollTop = Math.max(0, targetScrollTop);
                        });
                    }
                }, 50);
            });
            
            // 开始观察消息容器的变化
            const chatMessages = document.getElementById('chat-messages');
            if (chatMessages) {
                observer.observe(chatMessages, { childList: true, subtree: true });
                console.log("自动滚动观察器已启动");
            }
            
            // 直接绑定会话菜单触发器的点击事件 - 确保即使在页面加载完成后也能正常工作
            setTimeout(function() {
                // 为所有会话的菜单触发器添加内联事件
                document.querySelectorAll('.session-menu-trigger').forEach(function(trigger) {
                    // 清除已有的事件处理函数
                    const newTrigger = trigger.cloneNode(true);
                    if (trigger.parentNode) {
                        trigger.parentNode.replaceChild(newTrigger, trigger);
                        
                        // 添加内联事件处理函数
                        newTrigger.setAttribute('onclick', 
                            "window.handleSessionMenuClick(event, this.parentNode, this);");
                    }
                });
                console.log("会话菜单触发器事件已重新绑定");
            }, 1000); // 延迟1秒执行，确保页面完全加载
        });
    </script>
    
    <!-- 平台特定初始化 -->
    <script src="js/platform-init.js"></script>
    

</body>
</html>